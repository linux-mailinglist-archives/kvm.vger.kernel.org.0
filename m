Return-Path: <kvm+bounces-21921-lists+kvm=lfdr.de@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [147.75.80.249])
	by mail.lfdr.de (Postfix) with ESMTPS id 7784093749A
	for <lists+kvm@lfdr.de>; Fri, 19 Jul 2024 09:55:49 +0200 (CEST)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id 226541F21F41
	for <lists+kvm@lfdr.de>; Fri, 19 Jul 2024 07:55:49 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 5576961FC4;
	Fri, 19 Jul 2024 07:55:41 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="mD9d6Un5"
X-Original-To: kvm@vger.kernel.org
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 749892C80;
	Fri, 19 Jul 2024 07:55:40 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1721375740; cv=none; b=Ai5SlMf+cuOcU+i4/d1Olax4KO4JSJZ2CDewcrqF6RxPkpy7YQQT1HGBGx5wY5MXwyVpSLbfGxIXewz7rEtI7Fjjts8GnPbf7M5OPVtP2H32+eZqiBH7XsaKEY+69vAuERCFVaz7J28QiJl6rKL4dBbaMoZO7r0xKGkmAIf7MKs=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1721375740; c=relaxed/simple;
	bh=6Ay4p6jJCBni9LRzuGT1socEKkaxV4GanP/ZK2W/s/k=;
	h=Date:Message-ID:From:To:Cc:Subject:In-Reply-To:References:
	 MIME-Version:Content-Type; b=sP6L3RGIPn2BlqZgH5WvjqlK5Z2XXbB7Be7IBUE1awwTjWECCxnUBExjtHxEA8JuO2d2zszQxPrIy0Mc0qpANA39WxdJ+0CxVBGXKPqyx0yewtDDYxevqMIVimbrsD9qIm5MeXtRwoR9zn+DJpYXTcPRjiZh0BR5PpWa/LrWxDI=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=mD9d6Un5; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id F1038C32782;
	Fri, 19 Jul 2024 07:55:39 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1721375740;
	bh=6Ay4p6jJCBni9LRzuGT1socEKkaxV4GanP/ZK2W/s/k=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
	b=mD9d6Un588NMRY1s1nwglMIEvLYOQdfQuvFjOLyw+e3BbuDaEHoznlFOY8BTFG9x+
	 XlrNqf6L7MPwF1P0I2qHmWWn2to9Nd8NIalDngtAfJv8YBomn04yaJYclcjfDqXbY5
	 LzFSu3pEZlnDUaXHSrO61rxhk6qEBmPcrQxwn70+UV4li4O4Hu0Bbf9mdUA9cOvvwx
	 q2RYEdBmApwd+rUdqSrW9NnCh9q60H/3qbRWI4z/k1oGzOhcEVRMKHYXgdRPmxXdBK
	 /tp1QQmT2AF0QQsjI96XB074W12Nuwy/k1r1/4oQB/2Fkudye/bdOzMuBpOQMFYpoN
	 UYc27cbUrUMhw==
Received: from sofa.misterjones.org ([185.219.108.64] helo=goblin-girl.misterjones.org)
	by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
	(Exim 4.95)
	(envelope-from <maz@kernel.org>)
	id 1sUiSn-00De84-D8;
	Fri, 19 Jul 2024 08:55:37 +0100
Date: Fri, 19 Jul 2024 08:55:37 +0100
Message-ID: <86ikx13jeu.wl-maz@kernel.org>
From: Marc Zyngier <maz@kernel.org>
To: Raghavendra Rao Ananta <rananta@google.com>
Cc: Oliver Upton <oliver.upton@linux.dev>,
	Catalin Marinas <catalin.marinas@arm.com>,
	Will Deacon <will@kernel.org>,
	Mark Brown <broonie@kernel.org>,
	linux-arm-kernel@lists.infradead.org,
	kvmarm@lists.linux.dev,
	linux-kernel@vger.kernel.org,
	kvm@vger.kernel.org
Subject: Re: [PATCH] arm64/sysreg: Correct the values for GICv4.1
In-Reply-To: <20240718215532.616447-1-rananta@google.com>
References: <20240718215532.616447-1-rananta@google.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/29.3
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Precedence: bulk
X-Mailing-List: kvm@vger.kernel.org
List-Id: <kvm.vger.kernel.org>
List-Subscribe: <mailto:kvm+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:kvm+unsubscribe@vger.kernel.org>
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: rananta@google.com, oliver.upton@linux.dev, catalin.marinas@arm.com, will@kernel.org, broonie@kernel.org, linux-arm-kernel@lists.infradead.org, kvmarm@lists.linux.dev, linux-kernel@vger.kernel.org, kvm@vger.kernel.org
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false

On Thu, 18 Jul 2024 22:55:32 +0100,
Raghavendra Rao Ananta <rananta@google.com> wrote:
> 
> Currently, sysreg has value as 0b0010 for the presence of GICv4.1 in
> ID_PFR1_EL1 and ID_AA64PFR0_EL1, instead of 0b0011 as per ARM ARM.
> Hence, correct them to reflect ARM ARM.
> 
> Signed-off-by: Raghavendra Rao Ananta <rananta@google.com>
> ---
>  arch/arm64/tools/sysreg | 4 ++--
>  1 file changed, 2 insertions(+), 2 deletions(-)
> 
> diff --git a/arch/arm64/tools/sysreg b/arch/arm64/tools/sysreg
> index a4c1dd4741a47..7ceaa1e0b4bc2 100644
> --- a/arch/arm64/tools/sysreg
> +++ b/arch/arm64/tools/sysreg
> @@ -149,7 +149,7 @@ Res0	63:32
>  UnsignedEnum	31:28	GIC
>  	0b0000	NI
>  	0b0001	GICv3
> -	0b0010	GICv4p1
> +	0b0011	GICv4p1
>  EndEnum
>  UnsignedEnum	27:24	Virt_frac
>  	0b0000	NI
> @@ -903,7 +903,7 @@ EndEnum
>  UnsignedEnum	27:24	GIC
>  	0b0000	NI
>  	0b0001	IMP
> -	0b0010	V4P1
> +	0b0011	V4P1

I wonder why we have different naming schemes for the same feature...

>  EndEnum
>  SignedEnum	23:20	AdvSIMD
>  	0b0000	IMP
> 

Yup, this looks correct and checks out against revision H.b of the GICv3
spec, revision K.a of the ARM ARM, and even I.a (which the original
patches were referencing).

Once more, it shows that these dumps should be automatically generated
from the XML instead of (creatively) hand-written.

Reviewed-by: Marc Zyngier <maz@kernel.org>

	M.

-- 
Without deviation from the norm, progress is not possible.

