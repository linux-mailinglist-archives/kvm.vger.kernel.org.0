Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 9CBCE192492
	for <lists+kvm@lfdr.de>; Wed, 25 Mar 2020 10:49:30 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727301AbgCYJt3 (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Wed, 25 Mar 2020 05:49:29 -0400
Received: from mga01.intel.com ([192.55.52.88]:60954 "EHLO mga01.intel.com"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726116AbgCYJt3 (ORCPT <rfc822;kvm@vger.kernel.org>);
        Wed, 25 Mar 2020 05:49:29 -0400
IronPort-SDR: mKnWsMsAhxugs+J/Q+QMZIRNL8ttJNiCUqWhqfNNBIQRxXxE1H/zh5+p3Z7jkhr7MyZ7ktESVJ
 zFhDgAx6de2g==
X-Amp-Result: SKIPPED(no attachment in message)
X-Amp-File-Uploaded: False
Received: from orsmga001.jf.intel.com ([10.7.209.18])
  by fmsmga101.fm.intel.com with ESMTP/TLS/ECDHE-RSA-AES256-GCM-SHA384; 25 Mar 2020 02:49:28 -0700
IronPort-SDR: QnDFwi1eOP9EOSUOS105zuJWf7fOshXREM51JHsW11j74I+ZSoKn8w6aHA43BWP6wXx4YDpyYY
 Gz9UOeCKr+4Q==
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.72,303,1580803200"; 
   d="scan'208";a="326182720"
Received: from fmsmsx107.amr.corp.intel.com ([10.18.124.205])
  by orsmga001.jf.intel.com with ESMTP; 25 Mar 2020 02:49:27 -0700
Received: from fmsmsx609.amr.corp.intel.com (10.18.126.89) by
 fmsmsx107.amr.corp.intel.com (10.18.124.205) with Microsoft SMTP Server (TLS)
 id 14.3.439.0; Wed, 25 Mar 2020 02:49:27 -0700
Received: from fmsmsx609.amr.corp.intel.com (10.18.126.89) by
 fmsmsx609.amr.corp.intel.com (10.18.126.89) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id
 15.1.1713.5; Wed, 25 Mar 2020 02:49:27 -0700
Received: from shsmsx108.ccr.corp.intel.com (10.239.4.97) by
 fmsmsx609.amr.corp.intel.com (10.18.126.89) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256) id 15.1.1713.5
 via Frontend Transport; Wed, 25 Mar 2020 02:49:26 -0700
Received: from shsmsx104.ccr.corp.intel.com ([169.254.5.206]) by
 SHSMSX108.ccr.corp.intel.com ([169.254.8.235]) with mapi id 14.03.0439.000;
 Wed, 25 Mar 2020 17:49:23 +0800
From:   "Liu, Yi L" <yi.l.liu@intel.com>
To:     Peter Xu <peterx@redhat.com>
CC:     "qemu-devel@nongnu.org" <qemu-devel@nongnu.org>,
        "alex.williamson@redhat.com" <alex.williamson@redhat.com>,
        "eric.auger@redhat.com" <eric.auger@redhat.com>,
        "pbonzini@redhat.com" <pbonzini@redhat.com>,
        "mst@redhat.com" <mst@redhat.com>,
        "david@gibson.dropbear.id.au" <david@gibson.dropbear.id.au>,
        "Tian, Kevin" <kevin.tian@intel.com>,
        "Tian, Jun J" <jun.j.tian@intel.com>,
        "Sun, Yi Y" <yi.y.sun@intel.com>,
        "kvm@vger.kernel.org" <kvm@vger.kernel.org>,
        "Wu, Hao" <hao.wu@intel.com>,
        "jean-philippe@linaro.org" <jean-philippe@linaro.org>,
        Jacob Pan <jacob.jun.pan@linux.intel.com>,
        Yi Sun <yi.y.sun@linux.intel.com>
Subject: RE: [PATCH v1 13/22] vfio: add bind stage-1 page table support
Thread-Topic: [PATCH v1 13/22] vfio: add bind stage-1 page table support
Thread-Index: AQHWAEW3G3tO+4+IDkCwmVDpgLUkb6hXgDSAgAGT8oA=
Date:   Wed, 25 Mar 2020 09:49:22 +0000
Message-ID: <A2975661238FB949B60364EF0F2C25743A201E70@SHSMSX104.ccr.corp.intel.com>
References: <1584880579-12178-1-git-send-email-yi.l.liu@intel.com>
 <1584880579-12178-14-git-send-email-yi.l.liu@intel.com>
 <20200324174121.GX127076@xz-x1>
In-Reply-To: <20200324174121.GX127076@xz-x1>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
dlp-product: dlpe-windows
dlp-version: 11.2.0.6
dlp-reaction: no-action
x-originating-ip: [10.239.127.40]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Sender: kvm-owner@vger.kernel.org
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

PiBGcm9tOiBQZXRlciBYdSA8cGV0ZXJ4QHJlZGhhdC5jb20+DQo+IFNlbnQ6IFdlZG5lc2RheSwg
TWFyY2ggMjUsIDIwMjAgMTo0MSBBTQ0KPiBUbzogTGl1LCBZaSBMIDx5aS5sLmxpdUBpbnRlbC5j
b20+DQo+IFN1YmplY3Q6IFJlOiBbUEFUQ0ggdjEgMTMvMjJdIHZmaW86IGFkZCBiaW5kIHN0YWdl
LTEgcGFnZSB0YWJsZSBzdXBwb3J0DQo+IA0KPiBPbiBTdW4sIE1hciAyMiwgMjAyMCBhdCAwNToz
NjoxMEFNIC0wNzAwLCBMaXUgWWkgTCB3cm90ZToNCj4gPiBUaGlzIHBhdGNoIGFkZHMgYmluZF9z
dGFnZTFfcGd0YmwoKSBkZWZpbml0aW9uIGluDQo+ID4gSG9zdElPTU1VQ29udGV4dENsYXNzLCBh
bHNvIGFkZHMgY29ycmVzcG9uZGluZyBpbXBsZW1lbnRhdGlvbiBpbiBWRklPLg0KPiA+IFRoaXMg
aXMgdG8gZXhwb3NlIGEgd2F5IGZvciB2SU9NTVUgdG8gc2V0dXAgZHVhbCBzdGFnZSBETUEgdHJh
bnNsYXRpb24NCj4gPiBmb3IgcGFzc3RocnUgZGV2aWNlcyBvbiBoYXJkd2FyZS4NCj4gPg0KPiA+
IENjOiBLZXZpbiBUaWFuIDxrZXZpbi50aWFuQGludGVsLmNvbT4NCj4gPiBDYzogSmFjb2IgUGFu
IDxqYWNvYi5qdW4ucGFuQGxpbnV4LmludGVsLmNvbT4NCj4gPiBDYzogUGV0ZXIgWHUgPHBldGVy
eEByZWRoYXQuY29tPg0KPiA+IENjOiBFcmljIEF1Z2VyIDxlcmljLmF1Z2VyQHJlZGhhdC5jb20+
DQo+ID4gQ2M6IFlpIFN1biA8eWkueS5zdW5AbGludXguaW50ZWwuY29tPg0KPiA+IENjOiBEYXZp
ZCBHaWJzb24gPGRhdmlkQGdpYnNvbi5kcm9wYmVhci5pZC5hdT4NCj4gPiBDYzogQWxleCBXaWxs
aWFtc29uIDxhbGV4LndpbGxpYW1zb25AcmVkaGF0LmNvbT4NCj4gPiBTaWduZWQtb2ZmLWJ5OiBM
aXUgWWkgTCA8eWkubC5saXVAaW50ZWwuY29tPg0KPiA+IC0tLQ0KPiA+ICBody9pb21tdS9ob3N0
X2lvbW11X2NvbnRleHQuYyAgICAgICAgIHwgNDkNCj4gKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrLQ0KPiA+ICBody92ZmlvL2NvbW1vbi5jICAgICAgICAgICAgICAgICAgICAgIHwgNTUg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0NCj4gPiAgaW5jbHVkZS9ody9pb21t
dS9ob3N0X2lvbW11X2NvbnRleHQuaCB8IDI2ICsrKysrKysrKysrKysrKystDQo+ID4gIDMgZmls
ZXMgY2hhbmdlZCwgMTI3IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pDQo+ID4NCj4gPiBk
aWZmIC0tZ2l0IGEvaHcvaW9tbXUvaG9zdF9pb21tdV9jb250ZXh0LmMNCj4gPiBiL2h3L2lvbW11
L2hvc3RfaW9tbXVfY29udGV4dC5jIGluZGV4IGFmNjE4OTkuLjhhNTMzNzYgMTAwNjQ0DQo+ID4g
LS0tIGEvaHcvaW9tbXUvaG9zdF9pb21tdV9jb250ZXh0LmMNCj4gPiArKysgYi9ody9pb21tdS9o
b3N0X2lvbW11X2NvbnRleHQuYw0KPiA+IEBAIC02OSwyMSArNjksNjcgQEAgaW50IGhvc3RfaW9t
bXVfY3R4X3Bhc2lkX2ZyZWUoSG9zdElPTU1VQ29udGV4dA0KPiAqaG9zdF9pY3gsIHVpbnQzMl90
IHBhc2lkKQ0KPiA+ICAgICAgcmV0dXJuIGhpY3hjLT5wYXNpZF9mcmVlKGhvc3RfaWN4LCBwYXNp
ZCk7ICB9DQo+ID4NCj4gPiAraW50IGhvc3RfaW9tbXVfY3R4X2JpbmRfc3RhZ2UxX3BndGJsKEhv
c3RJT01NVUNvbnRleHQgKmhvc3RfaWN4LA0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgRHVhbElPTU1VU3RhZ2UxQmluZERhdGEgKmRhdGEpIHsNCj4gPiArICAgIEhv
c3RJT01NVUNvbnRleHRDbGFzcyAqaGljeGM7DQo+ID4gKw0KPiA+ICsgICAgaWYgKCFob3N0X2lj
eCkgew0KPiA+ICsgICAgICAgIHJldHVybiAtRUlOVkFMOw0KPiA+ICsgICAgfQ0KPiA+ICsNCj4g
PiArICAgIGhpY3hjID0gSE9TVF9JT01NVV9DT05URVhUX0dFVF9DTEFTUyhob3N0X2ljeCk7DQo+
ID4gKyAgICBpZiAoIWhpY3hjKSB7DQo+ID4gKyAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQo+ID4g
KyAgICB9DQo+ID4gKw0KPiA+ICsgICAgaWYgKCEoaG9zdF9pY3gtPmZsYWdzICYgSE9TVF9JT01N
VV9ORVNUSU5HKSB8fA0KPiA+ICsgICAgICAgICFoaWN4Yy0+YmluZF9zdGFnZTFfcGd0YmwpIHsN
Cj4gPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gPiArICAgIH0NCj4gPiArDQo+ID4gKyAg
ICByZXR1cm4gaGljeGMtPmJpbmRfc3RhZ2UxX3BndGJsKGhvc3RfaWN4LCBkYXRhKTsgfQ0KPiA+
ICsNCj4gPiAraW50IGhvc3RfaW9tbXVfY3R4X3VuYmluZF9zdGFnZTFfcGd0YmwoSG9zdElPTU1V
Q29udGV4dCAqaG9zdF9pY3gsDQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIER1YWxJT01NVVN0YWdlMUJpbmREYXRhICpkYXRhKQ0KPiA+ICt7DQo+ID4gKyAgICBI
b3N0SU9NTVVDb250ZXh0Q2xhc3MgKmhpY3hjOw0KPiA+ICsNCj4gPiArICAgIGlmICghaG9zdF9p
Y3gpIHsNCj4gPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gPiArICAgIH0NCj4gPiArDQo+
ID4gKyAgICBoaWN4YyA9IEhPU1RfSU9NTVVfQ09OVEVYVF9HRVRfQ0xBU1MoaG9zdF9pY3gpOw0K
PiA+ICsgICAgaWYgKCFoaWN4Yykgew0KPiA+ICsgICAgICAgIHJldHVybiAtRUlOVkFMOw0KPiA+
ICsgICAgfQ0KPiA+ICsNCj4gPiArICAgIGlmICghKGhvc3RfaWN4LT5mbGFncyAmIEhPU1RfSU9N
TVVfTkVTVElORykgfHwNCj4gPiArICAgICAgICAhaGljeGMtPnVuYmluZF9zdGFnZTFfcGd0Ymwp
IHsNCj4gPiArICAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gPiArICAgIH0NCj4gPiArDQo+ID4g
KyAgICByZXR1cm4gaGljeGMtPnVuYmluZF9zdGFnZTFfcGd0YmwoaG9zdF9pY3gsIGRhdGEpOyB9
DQo+ID4gKw0KPiA+ICB2b2lkIGhvc3RfaW9tbXVfY3R4X2luaXQodm9pZCAqX2hvc3RfaWN4LCBz
aXplX3QgaW5zdGFuY2Vfc2l6ZSwNCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0
IGNoYXIgKm1ydHlwZW5hbWUsDQo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICB1aW50NjRf
dCBmbGFncykNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQ2NF90IGZsYWdzLCB1
aW50MzJfdCBmb3JtYXRzKQ0KPiA+ICB7DQo+ID4gICAgICBIb3N0SU9NTVVDb250ZXh0ICpob3N0
X2ljeDsNCj4gPg0KPiA+ICAgICAgb2JqZWN0X2luaXRpYWxpemUoX2hvc3RfaWN4LCBpbnN0YW5j
ZV9zaXplLCBtcnR5cGVuYW1lKTsNCj4gPiAgICAgIGhvc3RfaWN4ID0gSE9TVF9JT01NVV9DT05U
RVhUKF9ob3N0X2ljeCk7DQo+ID4gICAgICBob3N0X2ljeC0+ZmxhZ3MgPSBmbGFnczsNCj4gPiAr
ICAgIGhvc3RfaWN4LT5zdGFnZTFfZm9ybWF0cyA9IGZvcm1hdHM7DQo+ID4gICAgICBob3N0X2lj
eC0+aW5pdGlhbGl6ZWQgPSB0cnVlOw0KPiA+ICB9DQo+ID4NCj4gPiAgdm9pZCBob3N0X2lvbW11
X2N0eF9kZXN0cm95KEhvc3RJT01NVUNvbnRleHQgKmhvc3RfaWN4KSAgew0KPiA+ICAgICAgaG9z
dF9pY3gtPmZsYWdzID0gMHgwOw0KPiA+ICsgICAgaG9zdF9pY3gtPnN0YWdlMV9mb3JtYXRzID0g
MHgwOw0KPiANCj4gVGhpcyBjb3VsZCBiZSBkcm9wcGVkIHRvbyB3aXRoIHRoZSBmdW5jdGlvbi4u
DQoNCnllcywgaXQgaXMuDQoNCj4gPiAgICAgIGhvc3RfaWN4LT5pbml0aWFsaXplZCA9IGZhbHNl
Ow0KPiA+ICB9DQo+ID4NCj4gPiBAQCAtOTIsNiArMTM4LDcgQEAgc3RhdGljIHZvaWQgaG9zdF9p
Y3hfaW5pdF9mbihPYmplY3QgKm9iaikNCj4gPiAgICAgIEhvc3RJT01NVUNvbnRleHQgKmhvc3Rf
aWN4ID0gSE9TVF9JT01NVV9DT05URVhUKG9iaik7DQo+ID4NCj4gPiAgICAgIGhvc3RfaWN4LT5m
bGFncyA9IDB4MDsNCj4gPiArICAgIGhvc3RfaWN4LT5zdGFnZTFfZm9ybWF0cyA9IDB4MDsNCj4g
DQo+IFNhbWUgaGVyZS4uLg0KDQplY2hvLg0KDQo+ID4gICAgICBob3N0X2ljeC0+aW5pdGlhbGl6
ZWQgPSBmYWxzZTsNCj4gPiAgfQ0KPiA+DQo+ID4gZGlmZiAtLWdpdCBhL2h3L3ZmaW8vY29tbW9u
LmMgYi9ody92ZmlvL2NvbW1vbi5jIGluZGV4DQo+ID4gZTBmMjgyOC4uNzcwYTc4NSAxMDA2NDQN
Cj4gPiAtLS0gYS9ody92ZmlvL2NvbW1vbi5jDQo+ID4gKysrIGIvaHcvdmZpby9jb21tb24uYw0K
PiA+IEBAIC0xMjIzLDYgKzEyMjMsNTIgQEAgc3RhdGljIGludA0KPiB2ZmlvX2hvc3RfaWN4X3Bh
c2lkX2ZyZWUoSG9zdElPTU1VQ29udGV4dCAqaG9zdF9pY3gsDQo+ID4gICAgICByZXR1cm4gMDsN
Cj4gPiAgfQ0KPiA+DQo+ID4gK3N0YXRpYyBpbnQgdmZpb19ob3N0X2ljeF9iaW5kX3N0YWdlMV9w
Z3RibChIb3N0SU9NTVVDb250ZXh0DQo+ID4gKypob3N0X2ljeCwNCj4gDQo+IFNhbWUgbmFtZSBp
c3N1ZSBvbiBpY3g/ICBGZWVsIGZyZWUgdG8gY2hvb3NlIGFueXRoaW5nIHRoYXQgYWxpZ25zIHdp
dGggeW91cg0KPiBwcmV2aW91cyBkZWNpc2lvbi4uLg0KDQp5ZXMsIEknbGwgdXNlIF9ob3N0X2lv
bW11X2N0eF8gaW5zdGVhZCBvZiBfaG9zdF9pY3hfLg0KDQo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBEdWFsSU9NTVVTdGFnZTFCaW5kRGF0YQ0KPiA+ICsq
YmluZF9kYXRhKSB7DQo+ID4gKyAgICBWRklPQ29udGFpbmVyICpjb250YWluZXIgPSBjb250YWlu
ZXJfb2YoaG9zdF9pY3gsIFZGSU9Db250YWluZXIsIGhvc3RfaWN4KTsNCj4gPiArICAgIHN0cnVj
dCB2ZmlvX2lvbW11X3R5cGUxX2JpbmQgKmJpbmQ7DQo+ID4gKyAgICB1bnNpZ25lZCBsb25nIGFy
Z3N6Ow0KPiA+ICsgICAgaW50IHJldCA9IDA7DQo+ID4gKw0KPiA+ICsgICAgYXJnc3ogPSBzaXpl
b2YoKmJpbmQpICsgc2l6ZW9mKGJpbmRfZGF0YS0+YmluZF9kYXRhKTsNCj4gPiArICAgIGJpbmQg
PSBnX21hbGxvYzAoYXJnc3opOw0KPiA+ICsgICAgYmluZC0+YXJnc3ogPSBhcmdzejsNCj4gPiAr
ICAgIGJpbmQtPmZsYWdzID0gVkZJT19JT01NVV9CSU5EX0dVRVNUX1BHVEJMOw0KPiA+ICsgICAg
bWVtY3B5KCZiaW5kLT5kYXRhLCAmYmluZF9kYXRhLT5iaW5kX2RhdGEsDQo+ID4gKyBzaXplb2Yo
YmluZF9kYXRhLT5iaW5kX2RhdGEpKTsNCj4gPiArDQo+ID4gKyAgICBpZiAoaW9jdGwoY29udGFp
bmVyLT5mZCwgVkZJT19JT01NVV9CSU5ELCBiaW5kKSkgew0KPiA+ICsgICAgICAgIHJldCA9IC1l
cnJubzsNCj4gPiArICAgICAgICBlcnJvcl9yZXBvcnQoIiVzOiBwYXNpZCAoJXUpIGJpbmQgZmFp
bGVkOiAlZCIsDQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICBfX2Z1bmNfXywgYmluZF9kYXRh
LT5wYXNpZCwgcmV0KTsNCj4gPiArICAgIH0NCj4gPiArICAgIGdfZnJlZShiaW5kKTsNCj4gPiAr
ICAgIHJldHVybiByZXQ7DQo+ID4gK30NCj4gPiArDQo+ID4gK3N0YXRpYyBpbnQgdmZpb19ob3N0
X2ljeF91bmJpbmRfc3RhZ2UxX3BndGJsKEhvc3RJT01NVUNvbnRleHQgKmhvc3RfaWN4LA0KPiA+
ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVhbElPTU1VU3RhZ2Ux
QmluZERhdGENCj4gPiArKmJpbmRfZGF0YSkgew0KPiA+ICsgICAgVkZJT0NvbnRhaW5lciAqY29u
dGFpbmVyID0gY29udGFpbmVyX29mKGhvc3RfaWN4LCBWRklPQ29udGFpbmVyLCBob3N0X2ljeCk7
DQo+ID4gKyAgICBzdHJ1Y3QgdmZpb19pb21tdV90eXBlMV9iaW5kICpiaW5kOw0KPiA+ICsgICAg
dW5zaWduZWQgbG9uZyBhcmdzejsNCj4gPiArICAgIGludCByZXQgPSAwOw0KPiA+ICsNCj4gPiAr
ICAgIGFyZ3N6ID0gc2l6ZW9mKCpiaW5kKSArIHNpemVvZihiaW5kX2RhdGEtPmJpbmRfZGF0YSk7
DQo+ID4gKyAgICBiaW5kID0gZ19tYWxsb2MwKGFyZ3N6KTsNCj4gPiArICAgIGJpbmQtPmFyZ3N6
ID0gYXJnc3o7DQo+ID4gKyAgICBiaW5kLT5mbGFncyA9IFZGSU9fSU9NTVVfVU5CSU5EX0dVRVNU
X1BHVEJMOw0KPiA+ICsgICAgbWVtY3B5KCZiaW5kLT5kYXRhLCAmYmluZF9kYXRhLT5iaW5kX2Rh
dGEsDQo+ID4gKyBzaXplb2YoYmluZF9kYXRhLT5iaW5kX2RhdGEpKTsNCj4gPiArDQo+ID4gKyAg
ICBpZiAoaW9jdGwoY29udGFpbmVyLT5mZCwgVkZJT19JT01NVV9CSU5ELCBiaW5kKSkgew0KPiA+
ICsgICAgICAgIHJldCA9IC1lcnJubzsNCj4gPiArICAgICAgICBlcnJvcl9yZXBvcnQoIiVzOiBw
YXNpZCAoJXUpIHVuYmluZCBmYWlsZWQ6ICVkIiwNCj4gPiArICAgICAgICAgICAgICAgICAgICAg
IF9fZnVuY19fLCBiaW5kX2RhdGEtPnBhc2lkLCByZXQpOw0KPiA+ICsgICAgfQ0KPiA+ICsgICAg
Z19mcmVlKGJpbmQpOw0KPiA+ICsgICAgcmV0dXJuIHJldDsNCj4gPiArfQ0KPiA+ICsNCj4gPiAg
LyoqDQo+ID4gICAqIEdldCBpb21tdSBpbmZvIGZyb20gaG9zdC4gQ2FsbGVyIG9mIHRoaXMgZnVu
Y2lvbiBzaG91bGQgZnJlZQ0KPiA+ICAgKiB0aGUgbWVtb3J5IHBvaW50ZWQgYnkgdGhlIHJldHVy
bmVkIHBvaW50ZXIgc3RvcmVkIGluIEBpbmZvIEBADQo+ID4gLTEzMzcsNiArMTM4Myw3IEBAIHN0
YXRpYyBpbnQgdmZpb19pbml0X2NvbnRhaW5lcihWRklPQ29udGFpbmVyICpjb250YWluZXIsIGlu
dA0KPiBncm91cF9mZCwNCj4gPiAgICAgICAgICBzdHJ1Y3QgdmZpb19pb21tdV90eXBlMV9pbmZv
X2NhcF9uZXN0aW5nIG5lc3RpbmcgPSB7DQo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLm5lc3RpbmdfY2FwYWJpbGl0aWVzID0gMHgwLA0KPiA+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGFnZTFfZm9ybWF0cyA9IDAsIH07
DQo+ID4gKyAgICAgICAgdWludDMyX3Qgc3RhZ2UxX2Zvcm1hdHM7DQo+ID4NCj4gPiAgICAgICAg
ICByZXQgPSB2ZmlvX2dldF9uZXN0aW5nX2lvbW11X2NhcChjb250YWluZXIsICZuZXN0aW5nKTsN
Cj4gPiAgICAgICAgICBpZiAocmV0KSB7DQo+ID4gQEAgLTEzNDcsMTAgKzEzOTQsMTQgQEAgc3Rh
dGljIGludCB2ZmlvX2luaXRfY29udGFpbmVyKFZGSU9Db250YWluZXINCj4gPiAqY29udGFpbmVy
LCBpbnQgZ3JvdXBfZmQsDQo+ID4NCj4gPiAgICAgICAgICBmbGFncyB8PSAobmVzdGluZy5uZXN0
aW5nX2NhcGFiaWxpdGllcyAmIFZGSU9fSU9NTVVfUEFTSURfUkVRUykgPw0KPiA+ICAgICAgICAg
ICAgICAgICAgIEhPU1RfSU9NTVVfUEFTSURfUkVRVUVTVCA6IDA7DQo+ID4gKyAgICAgICAgZmxh
Z3MgfD0gSE9TVF9JT01NVV9ORVNUSU5HOw0KPiA+ICsgICAgICAgIHN0YWdlMV9mb3JtYXRzID0g
bmVzdGluZy5zdGFnZTFfZm9ybWF0czsNCj4gPiArDQo+ID4gICAgICAgICAgaG9zdF9pb21tdV9j
dHhfaW5pdCgmY29udGFpbmVyLT5ob3N0X2ljeCwNCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNpemVvZihjb250YWluZXItPmhvc3RfaWN4KSwNCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFRZUEVfVkZJT19IT1NUX0lPTU1VX0NPTlRFWFQsDQo+ID4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBmbGFncyk7DQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBmbGFncywNCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWdlMV9mb3Jt
YXRzKTsNCj4gDQo+IFdlIGNhbiBjb25zaWRlciBwYXNzaW5nIGluIG5lc3Rpbmcuc3RhZ2UxX2Zv
cm1hdHMgYW5kIGRyb3Agc3RhZ2UxX2Zvcm1hdHMuDQoNCmFoYSwgeWVzLg0KDQpSZWdhcmRzLA0K
WWkgTGl1DQoNCg==
