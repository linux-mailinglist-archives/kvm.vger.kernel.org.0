Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 67824455852
	for <lists+kvm@lfdr.de>; Thu, 18 Nov 2021 10:52:52 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S245292AbhKRJzt (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Thu, 18 Nov 2021 04:55:49 -0500
Received: from smtp-fw-9103.amazon.com ([207.171.188.200]:5237 "EHLO
        smtp-fw-9103.amazon.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S245287AbhKRJyW (ORCPT <rfc822;kvm@vger.kernel.org>);
        Thu, 18 Nov 2021 04:54:22 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
  d=amazon.de; i=@amazon.de; q=dns/txt; s=amazon201209;
  t=1637229083; x=1668765083;
  h=from:to:cc:subject:date:message-id:content-id:
   mime-version:content-transfer-encoding;
  bh=qmsJzsuIciemmp4zdBevBtDHty8sywNOzaXrLohwo6Q=;
  b=lRZBM6LSqwblL1KQEmqGd2BDf7SBkxwKrEG000dtmmB2qSkUHZYD51D0
   IkKKzJ+CWDeTXc/3fFvMWj2/SytFcOSVW98IUjWTvKR1BaYsR/XRbhqNv
   G4BeY0EPLN418DcHmBnteqDW1h5uHvAnMq8xqTRTojtMIp5bUfrIui1kc
   g=;
X-IronPort-AV: E=Sophos;i="5.87,244,1631577600"; 
   d="scan'208,223";a="972553103"
Received: from pdx4-co-svc-p1-lb2-vlan2.amazon.com (HELO email-inbound-relay-pdx-2b-1f9d5b26.us-west-2.amazon.com) ([10.25.36.210])
  by smtp-border-fw-9103.sea19.amazon.com with ESMTP; 18 Nov 2021 09:51:08 +0000
Received: from EX13D15EUA002.ant.amazon.com (pdx1-ws-svc-p6-lb9-vlan2.pdx.amazon.com [10.236.137.194])
        by email-inbound-relay-pdx-2b-1f9d5b26.us-west-2.amazon.com (Postfix) with ESMTPS id 094B241D14;
        Thu, 18 Nov 2021 09:51:08 +0000 (UTC)
Received: from EX13D15EUA003.ant.amazon.com (10.43.165.94) by
 EX13D15EUA002.ant.amazon.com (10.43.165.79) with Microsoft SMTP Server (TLS)
 id 15.0.1497.26; Thu, 18 Nov 2021 09:51:06 +0000
Received: from EX13D15EUA003.ant.amazon.com ([10.43.165.94]) by
 EX13D15EUA003.ant.amazon.com ([10.43.165.94]) with mapi id 15.00.1497.026;
 Thu, 18 Nov 2021 09:51:06 +0000
From:   "Barzen, Benjamin" <bbarzen@amazon.de>
To:     "kvm@vger.kernel.org" <kvm@vger.kernel.org>
CC:     Benjamin Barzen <b.barzen@barzen.io>,
        "Barzen, Benjamin" <bbarzen@amazon.de>,
        "pbonzini@redhat.com" <pbonzini@redhat.com>
Subject: [kvm-unit-tests PATCH RESEND] x86/intel-iommu: check if DMA
 translation is enabled before testing it
Thread-Topic: [kvm-unit-tests PATCH RESEND] x86/intel-iommu: check if DMA
 translation is enabled before testing it
Thread-Index: AQHX3GHOrjHCaGsBYkCOfJkGRqe8CA==
Date:   Thu, 18 Nov 2021 09:51:05 +0000
Message-ID: <B5561618-963A-4750-A20C-03B937BE1CD6@amazon.de>
Accept-Language: en-US
Content-Language: en-GB
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.43.164.131]
Content-Type: text/plain; charset="utf-8"
Content-ID: <9A376AAB6E815F469FE72AB350D4AF71@amazon.com>
MIME-Version: 1.0
Content-Transfer-Encoding: base64
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

RnJvbSA3NGVhZWRlNjZmNzU4N2JmYjUyYTkyOWJjNTUzNDA0YTlhNDc2MzkyIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQ0KRnJvbTogQmVuamFtaW4gQmFyemVuIDxiYmFyemVuQGFtYXpvbi5kZT4N
CkRhdGU6IFdlZCwgMTcgTm92IDIwMjEgMTE6NDA6NTggKzAwMDANClN1YmplY3Q6IFtQQVRDSCBS
RVNFTkRdIHg4Ni9pbnRlbC1pb21tdTogY2hlY2sgaWYgRE1BIHRyYW5zbGF0aW9uIGlzIGVuYWJs
ZWQgYmVmb3JlIHRlc3RpbmcgaXQNCsKgDQpDb21taXQgWzFdIHRvIHRoZSBMaW51eCBrZXJuZWwg
YWxsb3dzIGZvciB1bml0cyB3aGVyZSBvbmx5IGludGVycnVwdA0KcmVtYXBwaW5nIGlzIGltcGxl
bWVudGVkLiBUbyBzaWduYWwgdGhpcyB0byB0aGUgZ3Vlc3Qgc3lzdGVtLCBhbGwgU0FHQVcNCmJp
dHMgb2YgdGhlIERNQVIgY2FwYWJpbGl0eSByZWdpc3RlciBhcmUgc2V0IHRvIDAuIFRoaXMgY29t
bWl0IGNoZWNrcyB0aGF0DQphdCBsZWFzdCBvbmUgU0FHQVcgYml0IGlzIHNldCBiZWZvcmUgcnVu
bmluZyBETUEgdHJhbnNsYXRpb24gdGVzdHMuDQrCoA0KWzFdwqBodHRwczovL2dpdC5rZXJuZWwu
b3JnL3B1Yi9zY20vbGludXgva2VybmVsL2dpdC90b3J2YWxkcy9saW51eC5naXQvY29tbWl0Lz9p
ZD1jNDBhYWFhYzEwIA0KwqANClNpZ25lZC1vZmYtYnk6IEJlbmphbWluIEJhcnplbiA8YmJhcnpl
bkBhbWF6b24uZGU+DQotLS0NCmxpYi94ODYvaW50ZWwtaW9tbXUuYyB8wqAgNyArKysrKy0tDQps
aWIveDg2L2ludGVsLWlvbW11LmggfMKgIDMgKystDQp4ODYvaW50ZWwtaW9tbXUuY8KgwqDCoMKg
IHwgMjIgKysrKysrKysrKysrKysrKy0tLS0tLQ0KMyBmaWxlcyBjaGFuZ2VkLCAyMyBpbnNlcnRp
b25zKCspLCA5IGRlbGV0aW9ucygtKQ0KwqANCmRpZmYgLS1naXQgYS9saWIveDg2L2ludGVsLWlv
bW11LmMgYi9saWIveDg2L2ludGVsLWlvbW11LmMNCmluZGV4IGM4MTFiYTUuLmY2ZjU2MzQgMTAw
NjQ0DQotLS0gYS9saWIveDg2L2ludGVsLWlvbW11LmMNCisrKyBiL2xpYi94ODYvaW50ZWwtaW9t
bXUuYw0KQEAgLTM1OCw4ICszNTgsMTEgQEAgdm9pZCB2dGRfaW5pdCh2b2lkKQ0KwqDCoMKgwqDC
oMKgwqDCoHZ0ZF9kdW1wX2luaXRfaW5mbygpOw0KwqDCoMKgwqDCoMKgwqAgdnRkX2djbWRfb3Io
VlREX0dDTURfUUkpOyAvKiBFbmFibGUgUUkgKi8NCi3CoMKgwqDCoMKgwqAgdnRkX3NldHVwX3Jv
b3RfdGFibGUoKTsNCsKgwqDCoMKgwqDCoMKgIHZ0ZF9zZXR1cF9pcl90YWJsZSgpOw0KLcKgwqDC
oMKgwqDCoCB2dGRfZ2NtZF9vcihWVERfR0NNRF9ETUFSKTsgLyogRW5hYmxlIERNQVIgKi8NCsKg
wqDCoMKgwqDCoMKgIHZ0ZF9nY21kX29yKFZURF9HQ01EX0lSKTvCoMKgIC8qIEVuYWJsZSBJUiAq
Lw0KKw0KK8KgwqDCoMKgIMKgwqBpZih2dGRfcmVhZHEoRE1BUl9DQVBfUkVHKSAmIFZURF9DQVBf
U0FHQVcpew0KK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgdnRkX3NldHVwX3Jvb3RfdGFi
bGUoKTsNCivCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHZ0ZF9nY21kX29yKFZURF9HQ01E
X0RNQVIpOyAvKiBFbmFibGUgRE1BUiAqLw0KK8KgwqDCoMKgwqDCoCB9DQp9DQpkaWZmIC0tZ2l0
IGEvbGliL3g4Ni9pbnRlbC1pb21tdS5oIGIvbGliL3g4Ni9pbnRlbC1pb21tdS5oDQppbmRleCBl
MTRmODI1Li4xOTNkODY2IDEwMDY0NA0KLS0tIGEvbGliL3g4Ni9pbnRlbC1pb21tdS5oDQorKysg
Yi9saWIveDg2L2ludGVsLWlvbW11LmgNCkBAIC0xMDAsNyArMTAwLDggQEANCiNkZWZpbmUgVlRE
X0NBUF9TQUdBV18zOWJpdMKgwqDCoMKgwqDCoMKgwqAgKDB4MlVMTCA8PCBWVERfQ0FQX1NBR0FX
X1NISUZUKQ0KLyogNDgtYml0IEFHQVcsIDQtbGV2ZWwgcGFnZS10YWJsZSAqLw0KI2RlZmluZSBW
VERfQ0FQX1NBR0FXXzQ4Yml0wqDCoMKgwqDCoMKgwqDCoCAoMHg0VUxMIDw8IFZURF9DQVBfU0FH
QVdfU0hJRlQpDQotI2RlZmluZSBWVERfQ0FQX1NBR0FXwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoCBWVERfQ0FQX1NBR0FXXzM5Yml0DQorLyogQWxsIFNBR0FXIGJpdHMgKi8NCisjZGVmaW5l
IFZURF9DQVBfU0FHQVfCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgICgweDFGVUxMIDw8IFZU
RF9DQVBfU0FHQVdfU0hJRlQpDQrCoC8qIEJvdGggMUcvMk0gaHVnZSBwYWdlcyAqLw0KI2RlZmlu
ZSBWVERfQ0FQX1NMTFBTwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCAoKDFVTEwgPDwgMzQp
IHwgKDFVTEwgPDwgMzUpKQ0KZGlmZiAtLWdpdCBhL3g4Ni9pbnRlbC1pb21tdS5jIGIveDg2L2lu
dGVsLWlvbW11LmMNCmluZGV4IDQ0NDJmZTEuLjUyZjI1MmUgMTAwNjQ0DQotLS0gYS94ODYvaW50
ZWwtaW9tbXUuYw0KKysrIGIveDg2L2ludGVsLWlvbW11LmMNCkBAIC0xNDAsMTQgKzE0MCwyMCBA
QCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQ0KwqDCoMKgwqDCoMKgwqDCoHJlcG9y
dCh2dGRfcmVhZGwoRE1BUl9GU1RTX1JFRykgPT0gMCwgImZhdWx0IHN0YXR1cyBjaGVjayIpOw0K
wqDCoMKgwqDCoMKgwqAgcmVwb3J0KHZ0ZF9yZWFkbChETUFSX0dTVFNfUkVHKSAmIFZURF9HQ01E
X1FJLCAiUUkgZW5hYmxlbWVudCIpOw0KLcKgwqDCoMKgwqDCoCByZXBvcnQodnRkX3JlYWRsKERN
QVJfR1NUU19SRUcpICYgVlREX0dDTURfUk9PVCwgIkRNQVIgdGFibGUgc2V0dXAiKTsNCsKgwqDC
oMKgwqDCoMKgIHJlcG9ydCh2dGRfcmVhZGwoRE1BUl9HU1RTX1JFRykgJiBWVERfR0NNRF9JUl9U
QUJMRSwgIklSIHRhYmxlIHNldHVwIik7DQotwqDCoMKgwqDCoMKgIHJlcG9ydCh2dGRfcmVhZGwo
RE1BUl9HU1RTX1JFRykgJiBWVERfR0NNRF9ETUFSLCAiRE1BUiBlbmFibGVtZW50Iik7DQrCoMKg
wqDCoMKgwqDCoCByZXBvcnQodnRkX3JlYWRsKERNQVJfR1NUU19SRUcpICYgVlREX0dDTURfSVIs
ICJJUiBlbmFibGVtZW50Iik7DQotwqDCoMKgwqDCoMKgIHJlcG9ydCh2dGRfcmVhZHEoRE1BUl9D
QVBfUkVHKSAmIFZURF9DQVBfU0FHQVcsDQorDQorwqDCoMKgwqDCoCDCoGlmICh2dGRfcmVhZHEo
RE1BUl9DQVBfUkVHKSAmIFZURF9DQVBfU0FHQVcpIHsNCivCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgIHJlcG9ydCh2dGRfcmVhZGwoRE1BUl9HU1RTX1JFRykgJiBWVERfR0NNRF9ST09ULCAi
RE1BUiB0YWJsZSBzZXR1cCIpOw0KK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgcmVwb3J0
KHZ0ZF9yZWFkbChETUFSX0dTVFNfUkVHKSAmIFZURF9HQ01EX0RNQVIsICJETUFSIGVuYWJsZW1l
bnQiKTsNCivCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHJlcG9ydCh2dGRfcmVhZHEoRE1B
Ul9DQVBfUkVHKSAmIFZURF9DQVBfU0FHQVdfMzliaXQsDQrCoMKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgICJETUFSIHN1cHBvcnQgMzkgYml0cyBhZGRyZXNzIHdpZHRoIik7DQotwqDCoMKgwqDC
oMKgIHJlcG9ydCh2dGRfcmVhZHEoRE1BUl9DQVBfUkVHKSAmIFZURF9DQVBfU0xMUFMsDQotwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgIkRNQVIgc3VwcG9ydCBodWdlIHBhZ2VzIik7DQorwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCByZXBvcnQodnRkX3JlYWRxKERNQVJfQ0FQX1JFRykg
JiBWVERfQ0FQX1NMTFBTLA0KK8KgwqDCoMKgIMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoCJETUFSIHN1cHBvcnQgaHVnZSBwYWdlcyIpOw0KK8KgwqDCoMKgwqDCoCB9IGVsc2Ug
ew0KK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgcHJpbnRmKCJETUFSIG1hcmtlZCBhcyBu
b3QgaW1wbGVtZW50ZWQgYnkgbWFjaGluZSwiDQorwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgICIgc2tpcHBpbmcgRE1BUiBzZXR1cCBh
bmQgdGVzdHMuXG4iKTsNCivCoMKgwqDCoMKgwqAgfQ0KwqDCoMKgwqDCoMKgwqDCoHJlcG9ydF9w
cmVmaXhfcG9wKCk7DQpAQCAtMTYwLDcgKzE2NiwxMSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hh
ciAqYXJndltdKQ0KwqDCoMKgwqDCoMKgwqAgfSBlbHNlIHsNCsKgwqDCoMKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoCBwcmludGYoIkZvdW5kIEVEVSBkZXZpY2U6XG4iKTsNCsKgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqDCoCBwY2lfZGV2X3ByaW50KCZlZHVfZGV2LnBjaV9kZXYpOw0KLcKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgdnRkX3Rlc3RfZG1hcigpOw0KK8KgwqDCoMKgwqDCoMKg
wqDCoMKgwqDCoMKgwqAgaWYgKHZ0ZF9yZWFkcShETUFSX0NBUF9SRUcpICYgVlREX0NBUF9TQUdB
Vykgew0KK8KgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHZ0ZF90
ZXN0X2RtYXIoKTsNCivCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIH0gZWxzZSB7DQorwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgcmVwb3J0X3NraXAoVlRE
X1RFU1RfRE1BUl80Qik7DQorwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCB9DQrCoMKgwqDC
oMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgdnRkX3Rlc3RfaXIoKTsNCsKgwqDCoMKgwqDCoMKgIH0N
Ci0twqANCjIuMzIuMA0KDQoNCgoKCkFtYXpvbiBEZXZlbG9wbWVudCBDZW50ZXIgR2VybWFueSBH
bWJICktyYXVzZW5zdHIuIDM4CjEwMTE3IEJlcmxpbgpHZXNjaGFlZnRzZnVlaHJ1bmc6IENocmlz
dGlhbiBTY2hsYWVnZXIsIEpvbmF0aGFuIFdlaXNzCkVpbmdldHJhZ2VuIGFtIEFtdHNnZXJpY2h0
IENoYXJsb3R0ZW5idXJnIHVudGVyIEhSQiAxNDkxNzMgQgpTaXR6OiBCZXJsaW4KVXN0LUlEOiBE
RSAyODkgMjM3IDg3OQoKCg==

