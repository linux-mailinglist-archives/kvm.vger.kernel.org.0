Return-Path: <kvm+bounces-59271-lists+kvm=lfdr.de@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [147.75.80.249])
	by mail.lfdr.de (Postfix) with ESMTPS id 0F1B2BAFB5C
	for <lists+kvm@lfdr.de>; Wed, 01 Oct 2025 10:44:33 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id A082B19246C8
	for <lists+kvm@lfdr.de>; Wed,  1 Oct 2025 08:44:55 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id D3FBB27D771;
	Wed,  1 Oct 2025 08:44:26 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b="Plqo/NgC"
X-Original-To: kvm@vger.kernel.org
Received: from smtp.kernel.org (aws-us-west-2-korg-mail-1.web.codeaurora.org [10.30.226.201])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id EC1A9270553;
	Wed,  1 Oct 2025 08:44:25 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=10.30.226.201
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1759308266; cv=none; b=g2IBWtWeiewscKiYYxpXa1xIt8R+gbZ8cPapvQUJCTES4oNbelqwkdjfA8u7t/1wEdmQYMW6wrX9E37iTx9wBnAsRZ0XzFkBsDZ/8e4uHPBJak5yOHOge+DGS+2vunUipQObWLegs4zUfsPwphfRRxbNKcUplv3akPhxX2yzij4=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1759308266; c=relaxed/simple;
	bh=OITbHtBiKQulBfkyYae+4T6+4pYA0XrXm6IhiHjoxnw=;
	h=Date:Message-ID:From:To:Cc:Subject:In-Reply-To:References:
	 MIME-Version:Content-Type; b=Pu96krDoJR/Vrpaf6WpBcF3eeXfmuJ1olEu8VL3N9hO7jX0dSaoYgNbXZbqjgfHd/hQegg7WG9ZOcZxCW6VSbgdkvo6GcIfc1slgoFxwC0Arns9ssuwtOzpg0kn+HYOeC/ZLR9yGtSPrVfBpinkSk8rLY8ksi6ycTMgm4aZQHXg=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dkim=pass (2048-bit key) header.d=kernel.org header.i=@kernel.org header.b=Plqo/NgC; arc=none smtp.client-ip=10.30.226.201
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 71C1AC4CEF4;
	Wed,  1 Oct 2025 08:44:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
	s=k20201202; t=1759308265;
	bh=OITbHtBiKQulBfkyYae+4T6+4pYA0XrXm6IhiHjoxnw=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
	b=Plqo/NgC3CS3b/cef7CYFgq3oEFShqUTYQrA7AQxkoGnGvb2uG1WVNI7AgBiSt58V
	 LjpMQ6S+4rxbvcEMeHFmv8Teg1jsTGO82+31mRAhfpoBxhFc5BOqSuIUobj+goVLr9
	 YAkJalMWxd7ck/Ncyh0thM049zf/w5iOSRdY8rIbNpUqjTmK5K3IMeAkr3tceEOd7U
	 KcenwMIdFMgXAPrf9UbWTwg11GjzpYwGFwF2OH+09WyUrCZX7KqmQnN+6VOHW1JktR
	 BcSuEYIx9znSuONefevTRqPPjAYhf2H/ExldrlIuC+sqq/J+QjT64z37AkiP8RU8Xn
	 IMbpdXklAQp9Q==
Received: from sofa.misterjones.org ([185.219.108.64] helo=goblin-girl.misterjones.org)
	by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
	(Exim 4.98.2)
	(envelope-from <maz@kernel.org>)
	id 1v3sRj-0000000AkPc-0VsO;
	Wed, 01 Oct 2025 08:44:23 +0000
Date: Wed, 01 Oct 2025 09:44:22 +0100
Message-ID: <86qzvnypsp.wl-maz@kernel.org>
From: Marc Zyngier <maz@kernel.org>
To: Vipin Sharma <vipinsh@google.com>
Cc: kvm@vger.kernel.org,
	kvmarm@lists.linux.dev,
	kvm-riscv@lists.infradead.org,
	seanjc@google.com,
	pbonzini@redhat.com,
	borntraeger@linux.ibm.com,
	frankja@linux.ibm.com,
	imbrenda@linux.ibm.com,
	anup@brainfault.org,
	atish.patra@linux.dev,
	zhaotianrui@loongson.cn,
	maobibo@loongson.cn,
	chenhuacai@kernel.org,
	oliver.upton@linux.dev,
	ajones@ventanamicro.com
Subject: Re: [PATCH v3 9/9] KVM: selftests: Provide README.rst for KVM selftests runner
In-Reply-To: <20250930163635.4035866-10-vipinsh@google.com>
References: <20250930163635.4035866-1-vipinsh@google.com>
	<20250930163635.4035866-10-vipinsh@google.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/30.1
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Precedence: bulk
X-Mailing-List: kvm@vger.kernel.org
List-Id: <kvm.vger.kernel.org>
List-Subscribe: <mailto:kvm+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:kvm+unsubscribe@vger.kernel.org>
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: vipinsh@google.com, kvm@vger.kernel.org, kvmarm@lists.linux.dev, kvm-riscv@lists.infradead.org, seanjc@google.com, pbonzini@redhat.com, borntraeger@linux.ibm.com, frankja@linux.ibm.com, imbrenda@linux.ibm.com, anup@brainfault.org, atish.patra@linux.dev, zhaotianrui@loongson.cn, maobibo@loongson.cn, chenhuacai@kernel.org, oliver.upton@linux.dev, ajones@ventanamicro.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false

On Tue, 30 Sep 2025 17:36:35 +0100,
Vipin Sharma <vipinsh@google.com> wrote:
> 
> Add README.rst for KVM selftest runner and explain how to use the
> runner.
> 
> Signed-off-by: Vipin Sharma <vipinsh@google.com>
> ---
>  tools/testing/selftests/kvm/.gitignore        |  1 +
>  tools/testing/selftests/kvm/runner/README.rst | 54 +++++++++++++++++++
>  2 files changed, 55 insertions(+)
>  create mode 100644 tools/testing/selftests/kvm/runner/README.rst
> 
> diff --git a/tools/testing/selftests/kvm/.gitignore b/tools/testing/selftests/kvm/.gitignore
> index 548d435bde2f..83aa2fe01bac 100644
> --- a/tools/testing/selftests/kvm/.gitignore
> +++ b/tools/testing/selftests/kvm/.gitignore
> @@ -4,6 +4,7 @@
>  !*.c
>  !*.h
>  !*.py
> +!*.rst
>  !*.S
>  !*.sh
>  !*.test
> diff --git a/tools/testing/selftests/kvm/runner/README.rst b/tools/testing/selftests/kvm/runner/README.rst
> new file mode 100644
> index 000000000000..83b071c0a0e6
> --- /dev/null
> +++ b/tools/testing/selftests/kvm/runner/README.rst
> @@ -0,0 +1,54 @@
> +KVM Selftest Runner
> +===================
> +
> +KVM selftest runner is highly configurable test executor that allows to run
> +tests with different configurations (not just the default), parallely, save

s/parallely/in parallel/

> +output to disk hierarchically, control what gets printed on console, provide
> +execution status.
> +
> +To generate default tests use::
> +
> +  # make tests_install
> +
> +This will create ``testcases_default_gen`` directory which will have testcases

I don't think using the future tense is correct here. I'd rather see
something written in the present tense, possibly imperative. For
example:

"Create 'blah' directory containing 'foo' files, one per test-case.

> +in `default.test` files. Each KVM selftest will have a directory in  which
> +`default.test` file will be created with executable path relative to KVM
> +selftest root directory i.e. `/tools/testing/selftests/kvm`.

Shouldn't this honor the existing build output directives? If it
actually does, then you want to call this out.

> For example, the
> +`dirty_log_perf_test` will have::
> +
> +  # cat testcase_default_gen/dirty_log_perf_test/default.test
> +  dirty_log_perf_test
> +
> +Runner will execute `dirty_log_perf_test`. Testcases files can also provide
> +extra arguments to the test::
> +
> +  # cat tests/dirty_log_perf_test/2slot_5vcpu_10iter.test
> +  dirty_log_perf_test -x 2 -v 5 -i 10
> +
> +In this case runner will execute the `dirty_log_perf_test` with the options.
> +

The beginning of the text talks about "non-default' configurations,
but you only seem to talk about the default stuff. How does one deals
with a non-default config?

	M.

-- 
Without deviation from the norm, progress is not possible.

