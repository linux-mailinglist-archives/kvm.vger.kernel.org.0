Return-Path: <kvm+bounces-52001-lists+kvm=lfdr.de@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [IPv6:2604:1380:40f1:3f00::1])
	by mail.lfdr.de (Postfix) with ESMTPS id ACD92AFF537
	for <lists+kvm@lfdr.de>; Thu, 10 Jul 2025 01:07:15 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id ABEAB7A8998
	for <lists+kvm@lfdr.de>; Wed,  9 Jul 2025 23:05:47 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 3F91925B1FF;
	Wed,  9 Jul 2025 23:07:06 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (1024-bit key) header.d=linux.dev header.i=@linux.dev header.b="RK16oQUa"
X-Original-To: kvm@vger.kernel.org
Received: from out-182.mta1.migadu.com (out-182.mta1.migadu.com [95.215.58.182])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 0BC8925178F
	for <kvm@vger.kernel.org>; Wed,  9 Jul 2025 23:07:02 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=95.215.58.182
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1752102425; cv=none; b=SgQIRwFNuBnMzT+K5XSK9ZDRYccjxgAkzyd9t8/BlJ7doUsS/fs/5HHQdUQmFQlSG5CdAVxt8Tj2WLZLHylF5WNuGcdl/z+ALZ6fPrjg3vKwBp5GnUWyxndi9VFzkWU1Zb4j2/PT9sroWTUj35QS6o4cCxx2SZqrtw8KCa8yg+0=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1752102425; c=relaxed/simple;
	bh=Gzs4Hv72270hOqjZvQS/UoTE7bX4ldVNwnRoUNcEldA=;
	h=Date:From:To:Cc:Subject:Message-ID:References:MIME-Version:
	 Content-Type:Content-Disposition:In-Reply-To; b=kHPm0xH3709NyO2Kk0WD1QttUEzFmnTZ6rp7yXzNNzfKslviBH3gDOQ7TuhZRM5W2rqqGmYdAg0SSMEjPUymtzMCxTDZMXsRBptANIllq3KDSXvwu+5I8o+GP9WLo/y+947XP2mpQ76gkg7kncFrdEGv918c9OsMC9pEUMYRsq0=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=linux.dev; spf=pass smtp.mailfrom=linux.dev; dkim=pass (1024-bit key) header.d=linux.dev header.i=@linux.dev header.b=RK16oQUa; arc=none smtp.client-ip=95.215.58.182
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=linux.dev
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=linux.dev
Date: Wed, 9 Jul 2025 16:06:38 -0700
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=linux.dev; s=key1;
	t=1752102420;
	h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
	 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
	 in-reply-to:in-reply-to:references:references;
	bh=uvZFJjtA5QE9squ61CMyH0mvqvsYVZ05/N0Uv4JADjk=;
	b=RK16oQUaJcuPz5AF68IuE7tQUp6ad9ibGnITlKl/Od0JZw4bYJVbJwqR85jQ3zRAvFVCuc
	Tw8axMHzy1q9Wxb9q84OuW2sz6Dxmm+/fPSX0mSRX0syd0d0rt1VMoo+v6Gpd187TwTy4s
	RxGdW+l2TZ2WF3Qqow76CYR3gGrJI2k=
X-Report-Abuse: Please report any abuse attempt to abuse@migadu.com and include these headers.
From: Oliver Upton <oliver.upton@linux.dev>
To: Vipin Sharma <vipinsh@google.com>
Cc: kvm@vger.kernel.org, kvmarm@lists.linux.dev,
	kvm-riscv@lists.infradead.org, linux-arm-kernel@lists.infradead.org,
	seanjc@google.com, pbonzini@redhat.com, anup@brainfault.org,
	borntraeger@linux.ibm.com, frankja@linux.ibm.com,
	imbrenda@linux.ibm.com, maz@kernel.org, dmatlack@google.com
Subject: Re: [PATCH v2 11/15] KVM: selftests: Auto generate default tests for
 KVM Selftests Runner
Message-ID: <aG71_sKK3jzIs0vt@linux.dev>
References: <20250606235619.1841595-1-vipinsh@google.com>
 <20250606235619.1841595-12-vipinsh@google.com>
Precedence: bulk
X-Mailing-List: kvm@vger.kernel.org
List-Id: <kvm.vger.kernel.org>
List-Subscribe: <mailto:kvm+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:kvm+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20250606235619.1841595-12-vipinsh@google.com>
X-Migadu-Flow: FLOW_OUT

On Fri, Jun 06, 2025 at 04:56:15PM -0700, Vipin Sharma wrote:
> Add logic in Makefile.kvm to auto generate default test files for KVM
> Selftests Runner. Preserve the hierarchy of test executables for
> autogenerated files.
> 
> Autogeneration of default test files guards against missing these files
> for new tests cases or rename of existing ones. These autogenerated
> files will be checked in so that during git-diff one can easily identify
> if the existing test files for the same test binary also needs an
> update. It also add new tests automatically in the default coverage.

I'm not sure I'm sold on the merits of committing these to the tree. My
preference would be to prioritize signal to noise and just commit the
'interesting' test configurations and generate the defaults from
$(TEST_PROGS) somewhere they're gitignored.

There's no amount of foolproofing that'll prevent folks from renaming a
test name w/o updating the 'interesting' test configurations that depend
upon it. Seriously -- I'm sure I'll manage to break it at least once :)

On top of that, there's a lot of selftests that take no arguments. Not
sure what we gain having a duplicated definition for these ones outside
of $(TEST_PROGS).

Thanks,
Oliver

