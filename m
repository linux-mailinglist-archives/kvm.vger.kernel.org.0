Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 30D154EFFB0
	for <lists+kvm@lfdr.de>; Sat,  2 Apr 2022 10:33:08 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S235044AbiDBIe4 (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Sat, 2 Apr 2022 04:34:56 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:45090 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S230062AbiDBIey (ORCPT <rfc822;kvm@vger.kernel.org>);
        Sat, 2 Apr 2022 04:34:54 -0400
Received: from baidu.com (mx22.baidu.com [220.181.50.185])
        by lindbergh.monkeyblade.net (Postfix) with ESMTP id 53365158558
        for <kvm@vger.kernel.org>; Sat,  2 Apr 2022 01:33:02 -0700 (PDT)
Received: from BJHW-Mail-Ex13.internal.baidu.com (unknown [10.127.64.36])
        by Forcepoint Email with ESMTPS id 178A18D969F2235F68C3;
        Sat,  2 Apr 2022 16:32:55 +0800 (CST)
Received: from BJHW-Mail-Ex15.internal.baidu.com (10.127.64.38) by
 BJHW-Mail-Ex13.internal.baidu.com (10.127.64.36) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id
 15.1.2308.20; Sat, 2 Apr 2022 16:32:54 +0800
Received: from BJHW-Mail-Ex15.internal.baidu.com ([100.100.100.38]) by
 BJHW-Mail-Ex15.internal.baidu.com ([100.100.100.38]) with mapi id
 15.01.2308.020; Sat, 2 Apr 2022 16:32:54 +0800
From:   "Li,Rongqing" <lirongqing@baidu.com>
To:     Paolo Bonzini <pbonzini@redhat.com>,
        "kvm@vger.kernel.org" <kvm@vger.kernel.org>,
        "seanjc@google.com" <seanjc@google.com>,
        "vkuznets@redhat.com" <vkuznets@redhat.com>
Subject: =?utf-8?B?562U5aSNOiBbUEFUQ0hdIEtWTTogVk1YOiBvcHRpbWl6ZSBwaV93YWtldXBf?=
 =?utf-8?Q?handler?=
Thread-Topic: [PATCH] KVM: VMX: optimize pi_wakeup_handler
Thread-Index: AQHYRmmqp/FH1eZDIUue+xcJmL0TgKzcSb8g
Date:   Sat, 2 Apr 2022 08:32:54 +0000
Message-ID: <d63acc4d9ac24a48b49415a45238e907@baidu.com>
References: <1648872113-24329-1-git-send-email-lirongqing@baidu.com>
 <e7896b4e-0b29-b735-88b8-34dd3b266d3d@redhat.com>
In-Reply-To: <e7896b4e-0b29-b735-88b8-34dd3b266d3d@redhat.com>
Accept-Language: zh-CN, en-US
Content-Language: zh-CN
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.22.206.40]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,SPF_HELO_PASS,
        SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

DQoNCj4gLS0tLS3pgq7ku7bljp/ku7YtLS0tLQ0KPiDlj5Hku7bkuro6IFBhb2xvIEJvbnppbmkg
PHBhb2xvLmJvbnppbmlAZ21haWwuY29tPiDku6PooaggUGFvbG8gQm9uemluaQ0KPiDlj5HpgIHm
l7bpl7Q6IDIwMjLlubQ05pyIMuaXpSAxNjoxNA0KPiDmlLbku7bkuro6IExpLFJvbmdxaW5nIDxs
aXJvbmdxaW5nQGJhaWR1LmNvbT47IGt2bUB2Z2VyLmtlcm5lbC5vcmc7DQo+IHNlYW5qY0Bnb29n
bGUuY29tOyB2a3V6bmV0c0ByZWRoYXQuY29tDQo+IOS4u+mimDogUmU6IFtQQVRDSF0gS1ZNOiBW
TVg6IG9wdGltaXplIHBpX3dha2V1cF9oYW5kbGVyDQo+IA0KPiBPbiA0LzIvMjIgMDY6MDEsIExp
IFJvbmdRaW5nIHdyb3RlOg0KPiA+IHBpX3dha2V1cF9oYW5kbGVyIGlzIHVzZWQgdG8gd2FrZXVw
IHRoZSBzbGVlcCB2Q1BVcyBieSBwb3N0ZWQgaXJxDQo+ID4gbGlzdF9mb3JfZWFjaF9lbnRyeSBp
cyB1c2VkIGluIGl0LCBhbmQgd2hvc2UgaW5wdXQgaXMgb3RoZXIgZnVuY3Rpb24NCj4gPiBwZXJf
Y3B1KCksIFRoYXQgY2F1c2UgdGhhdCBwZXJfY3B1KCkgYmUgaW52b2tlZCBhdCBsZWFzdCB0d2lj
ZSB3aGVuDQo+ID4gdGhlcmUgaXMgb25lIHNsZWVwIHZDUFUNCj4gPg0KPiA+IHNvIG9wdGltaXpl
IHBpX3dha2V1cF9oYW5kbGVyIGl0IGJ5IHJlYWRpbmcgb25jZSB3aGljaCBpcyBzYWZlIGluDQo+
ID4gc3BpbmxvY2sgcHJvdGVjdGlvbg0KPiA+DQo+ID4gYW5kIHNhbWUgdG8gcGVyIENQVSBzcGlu
bG9jaw0KPiANCj4gV2hhdCdzIHRoZSBkaWZmZXJlbmNlIGluIHRoZSBnZW5lcmF0ZWQgY29kZT8N
Cj4gDQoNClRoaXMgcmVkdWNlcyBvbmUgZmlmdGggYXNtIGNvZGVzDQoNCldpdGhvdXQgdGhpcyBw
YXRjaDoNCg0KMDAwMDAwMDAwMDAwMDQwMCA8cGlfd2FrZXVwX2hhbmRsZXI+Og0KIDQwMDogICBl
OCAwMCAwMCAwMCAwMCAgICAgICAgICBjYWxscSAgNDA1IDxwaV93YWtldXBfaGFuZGxlcisweDU+
DQogNDA1OiAgIDU1ICAgICAgICAgICAgICAgICAgICAgIHB1c2ggICAlcmJwDQogNDA2OiAgIDQ4
IDg5IGU1ICAgICAgICAgICAgICAgIG1vdiAgICAlcnNwLCVyYnANCiA0MDk6ICAgNDEgNTcgICAg
ICAgICAgICAgICAgICAgcHVzaCAgICVyMTUNCiA0MGI6ICAgNDEgNTYgICAgICAgICAgICAgICAg
ICAgcHVzaCAgICVyMTQNCiA0MGQ6ICAgNDEgNTUgICAgICAgICAgICAgICAgICAgcHVzaCAgICVy
MTMNCiA0MGY6ICAgNDEgNTQgICAgICAgICAgICAgICAgICAgcHVzaCAgICVyMTINCiA0MTE6ICAg
NDkgYzcgYzQgMDAgMDAgMDAgMDAgICAgbW92ICAgICQweDAsJXIxMg0KIDQxODogICA2NSA0NCA4
YiAyZCAwMCAwMCAwMCAgICBtb3YgICAgJWdzOjB4MCglcmlwKSwlcjEzZCAgICAgICAgIyA0MjAg
PHBpX3dha2V1cF9oYW5kbGVyKzB4MjA+DQogNDFmOiAgIDAwDQogNDIwOiAgIDRkIDYzIGVkICAg
ICAgICAgICAgICAgIG1vdnNscSAlcjEzZCwlcjEzDQogNDIzOiAgIDRjIDg5IGU3ICAgICAgICAg
ICAgICAgIG1vdiAgICAlcjEyLCVyZGkNCiA0MjY6ICAgNTMgICAgICAgICAgICAgICAgICAgICAg
cHVzaCAgICVyYngNCiA0Mjc6ICAgNGEgMDMgM2MgZWQgMDAgMDAgMDAgICAgYWRkICAgIDB4MCgs
JXIxMyw4KSwlcmRpDQogNDJlOiAgIDAwDQogNDJmOiAgIDQ5IGM3IGM2IDAwIDAwIDAwIDAwICAg
IG1vdiAgICAkMHgwLCVyMTQNCiA0MzY6ICAgZTggMDAgMDAgMDAgMDAgICAgICAgICAgY2FsbHEg
IDQzYiA8cGlfd2FrZXVwX2hhbmRsZXIrMHgzYj4NCiA0M2I6ICAgNGEgOGIgMGMgZWQgMDAgMDAg
MDAgICAgbW92ICAgIDB4MCgsJXIxMyw4KSwlcmN4DQogNDQyOiAgIDAwDQogNDQzOiAgIDRjIDg5
IGYwICAgICAgICAgICAgICAgIG1vdiAgICAlcjE0LCVyYXgNCiA0NDY6ICAgNDggOGIgMTQgMDEg
ICAgICAgICAgICAgbW92ICAgICglcmN4LCVyYXgsMSksJXJkeA0KIDQ0YTogICA0OCAwMSBjOCAg
ICAgICAgICAgICAgICBhZGQgICAgJXJjeCwlcmF4DQogNDRkOiAgIDQ4IDM5IGMyICAgICAgICAg
ICAgICAgIGNtcCAgICAlcmF4LCVyZHgNCiA0NTA6ICAgNzQgM2UgICAgICAgICAgICAgICAgICAg
amUgICAgIDQ5MCA8cGlfd2FrZXVwX2hhbmRsZXIrMHg5MD4NCiA0NTI6ICAgNDggOGQgOWEgNDAg
ZDkgZmYgZmYgICAgbGVhICAgIC0weDI2YzAoJXJkeCksJXJieA0KIDQ1OTogICA0OSBjNyBjNyAw
MCAwMCAwMCAwMCAgICBtb3YgICAgJDB4MCwlcjE1DQogNDYwOiAgIDQ4IDhiIDgzIGEwIDI2IDAw
IDAwICAgIG1vdiAgICAweDI2YTAoJXJieCksJXJheA0KIDQ2NzogICBhOCAwMSAgICAgICAgICAg
ICAgICAgICB0ZXN0ICAgJDB4MSwlYWwNCiA0Njk6ICAgNzQgMDggICAgICAgICAgICAgICAgICAg
amUgICAgIDQ3MyA8cGlfd2FrZXVwX2hhbmRsZXIrMHg3Mz4NCiA0NmI6ICAgNDggODkgZGYgICAg
ICAgICAgICAgICAgbW92ICAgICVyYngsJXJkaQ0KIDQ2ZTogICBlOCAwMCAwMCAwMCAwMCAgICAg
ICAgICBjYWxscSAgNDczIDxwaV93YWtldXBfaGFuZGxlcisweDczPg0KIDQ3MzogICA0YiA4YiAw
YyBlZiAgICAgICAgICAgICBtb3YgICAgKCVyMTUsJXIxMyw4KSwlcmN4DQogNDc3OiAgIDQ4IDhi
IDkzIGMwIDI2IDAwIDAwICAgIG1vdiAgICAweDI2YzAoJXJieCksJXJkeA0KIDQ3ZTogICA0YyA4
OSBmMCAgICAgICAgICAgICAgICBtb3YgICAgJXIxNCwlcmF4DQogNDgxOiAgIDQ4IDAxIGM4ICAg
ICAgICAgICAgICAgIGFkZCAgICAlcmN4LCVyYXgNCiA0ODQ6ICAgNDggOGQgOWEgNDAgZDkgZmYg
ZmYgICAgbGVhICAgIC0weDI2YzAoJXJkeCksJXJieA0KIDQ4YjogICA0OCAzOSBjMiAgICAgICAg
ICAgICAgICBjbXAgICAgJXJheCwlcmR4DQogNDhlOiAgIDc1IGQwICAgICAgICAgICAgICAgICAg
IGpuZSAgICA0NjAgPHBpX3dha2V1cF9oYW5kbGVyKzB4NjA+DQogNDkwOiAgIDQ5IDAxIGNjICAg
ICAgICAgICAgICAgIGFkZCAgICAlcmN4LCVyMTINCiA0OTM6ICAgNDEgYzYgMDQgMjQgMDAgICAg
ICAgICAgbW92YiAgICQweDAsKCVyMTIpDQogNDk4OiAgIDViICAgICAgICAgICAgICAgICAgICAg
IHBvcCAgICAlcmJ4DQogNDk5OiAgIDQxIDVjICAgICAgICAgICAgICAgICAgIHBvcCAgICAlcjEy
DQogNDliOiAgIDQxIDVkICAgICAgICAgICAgICAgICAgIHBvcCAgICAlcjEzDQogNDlkOiAgIDQx
IDVlICAgICAgICAgICAgICAgICAgIHBvcCAgICAlcjE0DQogNDlmOiAgIDQxIDVmICAgICAgICAg
ICAgICAgICAgIHBvcCAgICAlcjE1DQogNGExOiAgIDVkICAgICAgICAgICAgICAgICAgICAgIHBv
cCAgICAlcmJwDQogNGEyOiAgIGMzICAgICAgICAgICAgICAgICAgICAgIHJldHENCiA0YTM6ICAg
NjYgMGYgMWYgODQgMDAgMDAgMDAgICAgbm9wdyAgIDB4MCglcmF4LCVyYXgsMSkNCiA0YWE6ICAg
MDAgMDANCiA0YWM6ICAgNjYgMmUgMGYgMWYgODQgMDAgMDAgICAgbm9wdyAgICVjczoweDAoJXJh
eCwlcmF4LDEpDQogNGIzOiAgIDAwIDAwIDAwDQogNGI2OiAgIDY2IDJlIDBmIDFmIDg0IDAwIDAw
ICAgIG5vcHcgICAlY3M6MHgwKCVyYXgsJXJheCwxKQ0KIDRiZDogICAwMCAwMCAwMA0KDQoNCg0K
V2l0aCB0aGlzIHBhdGNoDQoNCjQwMDogICBlOCAwMCAwMCAwMCAwMCAgICAgICAgICBjYWxscSAg
NDA1IDxwaV93YWtldXBfaGFuZGxlcisweDU+DQogNDA1OiAgIDU1ICAgICAgICAgICAgICAgICAg
ICAgIHB1c2ggICAlcmJwDQogNDA2OiAgIDQ4IDg5IGU1ICAgICAgICAgICAgICAgIG1vdiAgICAl
cnNwLCVyYnANCiA0MDk6ICAgNDEgNTUgICAgICAgICAgICAgICAgICAgcHVzaCAgICVyMTMNCiA0
MGI6ICAgNDEgNTQgICAgICAgICAgICAgICAgICAgcHVzaCAgICVyMTINCiA0MGQ6ICAgNTMgICAg
ICAgICAgICAgICAgICAgICAgcHVzaCAgICVyYngNCiA0MGU6ICAgNDkgYzcgYzUgMDAgMDAgMDAg
MDAgICAgbW92ICAgICQweDAsJXIxMw0KIDQxNTogICA0OSBjNyBjNCAwMCAwMCAwMCAwMCAgICBt
b3YgICAgJDB4MCwlcjEyDQogNDFjOiAgIDY1IDhiIDFkIDAwIDAwIDAwIDAwICAgIG1vdiAgICAl
Z3M6MHgwKCVyaXApLCVlYnggICAgICAgICMgNDIzIDxwaV93YWtldXBfaGFuZGxlcisweDIzPg0K
IDQyMzogICA0OCA2MyBkYiAgICAgICAgICAgICAgICBtb3ZzbHEgJWVieCwlcmJ4DQogNDI2OiAg
IDRjIDAzIDJjIGRkIDAwIDAwIDAwICAgIGFkZCAgICAweDAoLCVyYngsOCksJXIxMw0KIDQyZDog
ICAwMA0KIDQyZTogICA0YyA4OSBlZiAgICAgICAgICAgICAgICBtb3YgICAgJXIxMywlcmRpDQog
NDMxOiAgIGU4IDAwIDAwIDAwIDAwICAgICAgICAgIGNhbGxxICA0MzYgPHBpX3dha2V1cF9oYW5k
bGVyKzB4MzY+DQogNDM2OiAgIDRjIDAzIDI0IGRkIDAwIDAwIDAwICAgIGFkZCAgICAweDAoLCVy
YngsOCksJXIxMg0KIDQzZDogICAwMA0KIDQzZTogICA0OSA4YiAwNCAyNCAgICAgICAgICAgICBt
b3YgICAgKCVyMTIpLCVyYXgNCiA0NDI6ICAgNDkgMzkgYzQgICAgICAgICAgICAgICAgY21wICAg
ICVyYXgsJXIxMg0KIDQ0NTogICA3NCAyZCAgICAgICAgICAgICAgICAgICBqZSAgICAgNDc0IDxw
aV93YWtldXBfaGFuZGxlcisweDc0Pg0KIDQ0NzogICA0OCA4ZCA5OCA0MCBkOSBmZiBmZiAgICBs
ZWEgICAgLTB4MjZjMCglcmF4KSwlcmJ4DQogNDRlOiAgIDQ4IDhiIDgzIGEwIDI2IDAwIDAwICAg
IG1vdiAgICAweDI2YTAoJXJieCksJXJheA0KIDQ1NTogICBhOCAwMSAgICAgICAgICAgICAgICAg
ICB0ZXN0ICAgJDB4MSwlYWwNCiA0NTc6ICAgNzQgMDggICAgICAgICAgICAgICAgICAgamUgICAg
IDQ2MSA8cGlfd2FrZXVwX2hhbmRsZXIrMHg2MT4NCiA0NTk6ICAgNDggODkgZGYgICAgICAgICAg
ICAgICAgbW92ICAgICVyYngsJXJkaQ0KIDQ1YzogICBlOCAwMCAwMCAwMCAwMCAgICAgICAgICBj
YWxscSAgNDYxIDxwaV93YWtldXBfaGFuZGxlcisweDYxPg0KIDQ2MTogICA0OCA4YiA4MyBjMCAy
NiAwMCAwMCAgICBtb3YgICAgMHgyNmMwKCVyYngpLCVyYXgNCiA0Njg6ICAgNDkgMzkgYzQgICAg
ICAgICAgICAgICAgY21wICAgICVyYXgsJXIxMg0KIDQ2YjogICA0OCA4ZCA5OCA0MCBkOSBmZiBm
ZiAgICBsZWEgICAgLTB4MjZjMCglcmF4KSwlcmJ4DQogNDcyOiAgIDc1IGRhICAgICAgICAgICAg
ICAgICAgIGpuZSAgICA0NGUgPHBpX3dha2V1cF9oYW5kbGVyKzB4NGU+DQogNDc0OiAgIDQxIGM2
IDQ1IDAwIDAwICAgICAgICAgIG1vdmIgICAkMHgwLDB4MCglcjEzKQ0KIDQ3OTogICA1YiAgICAg
ICAgICAgICAgICAgICAgICBwb3AgICAgJXJieA0KIDQ3YTogICA0MSA1YyAgICAgICAgICAgICAg
ICAgICBwb3AgICAgJXIxMg0KIDQ3YzogICA0MSA1ZCAgICAgICAgICAgICAgICAgICBwb3AgICAg
JXIxMw0KIDQ3ZTogICA1ZCAgICAgICAgICAgICAgICAgICAgICBwb3AgICAgJXJicA0KIDQ3Zjog
ICBjMyAgICAgICAgICAgICAgICAgICAgICByZXRxDQoNCg0KdGhlc2UgaXMgYSBzaW1pbGFyIHBh
dGNoIDAzMWUzYmQ4OTg2ZmZmZTMxZTFkZGJmNTI2NGNjY2ZlMzBjOWFiZDcNCg0KLUxpDQo=
