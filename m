Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 2B2FE40192A
	for <lists+kvm@lfdr.de>; Mon,  6 Sep 2021 11:47:37 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S241643AbhIFJrV (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Mon, 6 Sep 2021 05:47:21 -0400
Received: from mail.kernel.org ([198.145.29.99]:39684 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S241617AbhIFJrU (ORCPT <rfc822;kvm@vger.kernel.org>);
        Mon, 6 Sep 2021 05:47:20 -0400
Received: from disco-boy.misterjones.org (disco-boy.misterjones.org [51.254.78.96])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by mail.kernel.org (Postfix) with ESMTPSA id 71D2A60E76;
        Mon,  6 Sep 2021 09:46:16 +0000 (UTC)
Received: from 82-132-228-124.dab.02.net ([82.132.228.124] helo=wait-a-minute.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.94.2)
        (envelope-from <maz@kernel.org>)
        id 1mNBCg-009E0M-LO; Mon, 06 Sep 2021 10:46:14 +0100
Date:   Mon, 06 Sep 2021 10:46:13 +0100
Message-ID: <87eea2c9zu.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Juergen Gross <jgross@suse.com>
Cc:     kvm@vger.kernel.org, x86@kernel.org,
        linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org,
        ehabkost@redhat.com, James Morse <james.morse@arm.com>,
        Alexandru Elisei <alexandru.elisei@arm.com>,
        Suzuki K Poulose <suzuki.poulose@arm.com>,
        Catalin Marinas <catalin.marinas@arm.com>,
        Will Deacon <will@kernel.org>,
        Paolo Bonzini <pbonzini@redhat.com>,
        Sean Christopherson <seanjc@google.com>,
        Vitaly Kuznetsov <vkuznets@redhat.com>,
        Wanpeng Li <wanpengli@tencent.com>,
        Jim Mattson <jmattson@google.com>,
        Joerg Roedel <joro@8bytes.org>,
        Thomas Gleixner <tglx@linutronix.de>,
        Ingo Molnar <mingo@redhat.com>, Borislav Petkov <bp@alien8.de>,
        "H. Peter Anvin" <hpa@zytor.com>, kvmarm@lists.cs.columbia.edu
Subject: Re: [PATCH v2 5/6] kvm: allocate vcpu pointer array separately
In-Reply-To: <37699e98-9a47-732d-8522-daa90f35c52f@suse.com>
References: <20210903130808.30142-1-jgross@suse.com>
        <20210903130808.30142-6-jgross@suse.com>
        <871r65wwk7.wl-maz@kernel.org>
        <37699e98-9a47-732d-8522-daa90f35c52f@suse.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/27.1
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 82.132.228.124
X-SA-Exim-Rcpt-To: jgross@suse.com, kvm@vger.kernel.org, x86@kernel.org, linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org, ehabkost@redhat.com, james.morse@arm.com, alexandru.elisei@arm.com, suzuki.poulose@arm.com, catalin.marinas@arm.com, will@kernel.org, pbonzini@redhat.com, seanjc@google.com, vkuznets@redhat.com, wanpengli@tencent.com, jmattson@google.com, joro@8bytes.org, tglx@linutronix.de, mingo@redhat.com, bp@alien8.de, hpa@zytor.com, kvmarm@lists.cs.columbia.edu
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

On Mon, 06 Sep 2021 05:33:35 +0100,
Juergen Gross <jgross@suse.com> wrote:
> 
> On 03.09.21 16:41, Marc Zyngier wrote:
>
> > At this stage, I really wonder why we are not using an xarray instead.
> > 
> > I wrote this [1] a while ago, and nothing caught fire. It was also a
> > net deletion of code...
> 
> Indeed, I'd prefer that solution!
> 
> Are you fine with me swapping my patch with yours in the series?

Of course, feel free to grab the whole series. You'll probably need
the initial patches to set the scene for this. On their own, they are
a nice cleanup, and I trust you can write a decent commit message for
the three patches affecting mips/s390/x86.

I would normally do that myself, but my network connectivity is
reduced to almost nothing at the moment.

Thanks,

	M.

-- 
Without deviation from the norm, progress is not possible.
