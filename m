Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 53368750C80
	for <lists+kvm@lfdr.de>; Wed, 12 Jul 2023 17:32:07 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S232947AbjGLPcE (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Wed, 12 Jul 2023 11:32:04 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:48394 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S232879AbjGLPbz (ORCPT <rfc822;kvm@vger.kernel.org>);
        Wed, 12 Jul 2023 11:31:55 -0400
Received: from dfw.source.kernel.org (dfw.source.kernel.org [139.178.84.217])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id C59701BE4
        for <kvm@vger.kernel.org>; Wed, 12 Jul 2023 08:31:54 -0700 (PDT)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
        (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
         key-exchange X25519 server-signature RSA-PSS (2048 bits))
        (No client certificate requested)
        by dfw.source.kernel.org (Postfix) with ESMTPS id 6367C6185F
        for <kvm@vger.kernel.org>; Wed, 12 Jul 2023 15:31:54 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id C023BC433C7;
        Wed, 12 Jul 2023 15:31:53 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1689175913;
        bh=n7iPhHNvQBqYfKrs7J+YNqytd8Rd8bfcawwOlHwdCFM=;
        h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
        b=eaA4vguC9EyJ5/DSCtqu+pabWF7uM8rEtQPOdoOm7NA8UmWU16AeZAwUD0UFJWG03
         6UkL+qZQbACxzKaxGWqirPEx6zpWcq4Oi8HSjdjD2e0Q/Qv9oZRRAu4thyNbvhm/mM
         Zm7IPnast9U63sFk48cCMj+tTCe7RIx7nMpf2wH7ZddCaoyYk4VLdZQx4enSjwMKWk
         vtV5lErSdAA56lppuE6qB9ZZ/y3LFkfZHKlQfJ9eiHVv7Yr0QXY65HvA2zh+M2WPul
         TyUvJDsI7QbVqf2E9XEehUpAKzRUzzrOOEXPGMihUNLbTg21SaO6GbDQmQ8KJjAUNz
         M8d9O80ZU46Sg==
Received: from sofa.misterjones.org ([185.219.108.64] helo=goblin-girl.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.95)
        (envelope-from <maz@kernel.org>)
        id 1qJbol-00CVSd-J5;
        Wed, 12 Jul 2023 16:31:51 +0100
Date:   Wed, 12 Jul 2023 16:31:51 +0100
Message-ID: <86y1jluowo.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     eric.auger@redhat.com
Cc:     kvmarm@lists.linux.dev, kvm@vger.kernel.org,
        linux-arm-kernel@lists.infradead.org,
        Catalin Marinas <catalin.marinas@arm.com>,
        Mark Brown <broonie@kernel.org>,
        Mark Rutland <mark.rutland@arm.com>,
        Will Deacon <will@kernel.org>,
        Alexandru Elisei <alexandru.elisei@arm.com>,
        Andre Przywara <andre.przywara@arm.com>,
        Chase Conklin <chase.conklin@arm.com>,
        Ganapatrao Kulkarni <gankulkarni@os.amperecomputing.com>,
        Darren Hart <darren@os.amperecomputing.com>,
        Miguel Luis <miguel.luis@oracle.com>,
        James Morse <james.morse@arm.com>,
        Suzuki K Poulose <suzuki.poulose@arm.com>,
        Oliver Upton <oliver.upton@linux.dev>,
        Zenghui Yu <yuzenghui@huawei.com>
Subject: Re: [PATCH 00/27] KVM: arm64: NV trap forwarding infrastructure
In-Reply-To: <f1e3b52d-bb6b-6d1d-5194-1a445a1d7cf1@redhat.com>
References: <20230712145810.3864793-1-maz@kernel.org>
        <f1e3b52d-bb6b-6d1d-5194-1a445a1d7cf1@redhat.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/28.2
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: eric.auger@redhat.com, kvmarm@lists.linux.dev, kvm@vger.kernel.org, linux-arm-kernel@lists.infradead.org, catalin.marinas@arm.com, broonie@kernel.org, mark.rutland@arm.com, will@kernel.org, alexandru.elisei@arm.com, andre.przywara@arm.com, chase.conklin@arm.com, gankulkarni@os.amperecomputing.com, darren@os.amperecomputing.com, miguel.luis@oracle.com, james.morse@arm.com, suzuki.poulose@arm.com, oliver.upton@linux.dev, yuzenghui@huawei.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
X-Spam-Status: No, score=-7.1 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_HI,
        SPF_HELO_NONE,SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham
        autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

On Wed, 12 Jul 2023 16:16:59 +0100,
Eric Auger <eric.auger@redhat.com> wrote:
> 
> Hi Marc,
> 
> On 7/12/23 16:57, Marc Zyngier wrote:
> > As people are getting tired of seeing the full NV series, I've
> > extracted some of the easy stuff which I'm targeting for 6.6.
> >
> > This implements the so called "trap forwarding" infrastructure, which
> > gets used when we take a trap from an L2 guest and that the L1 guest
> > wants to see the trap for itself.
> >
> > Most of the series is pretty boring stuff, mostly a long list of
> > encodings which are mapped to a set of trap bits. I swear they are
> > correct. Sort of.
> >
> > The interesting bit is around how we compute the trap result, which is
> > pretty complex due to the layers of crap the architecture has piled
> > over the years (a single op can be trapped by multiple coarse grained
> > trap bits, or a fine grained trap bit, which may itself be conditioned
> > by another control bit -- madness).
> >
> > This also results in some rework of both the FGT stuff (for which I
> > carry a patch from Mark) and newly introduced the HCRX support.
> >
> > With that (and the rest of the NV series[1]), FGT gets exposed to guests
> > and the trapping seems to work as expected.
> >
> > [1] https://git.kernel.org/pub/scm/linux/kernel/git/maz/arm-platforms.git/log/?h=kvm-arm64/nv-6.6-WIP
> 
> I have not received patches 10-27 and I do not see them on lore archive
> https://lore.kernel.org/all/20230712145810.3864793-1-maz@kernel.org/#r

You should see them shortly. My server throttles outgoing bursts of
more than 10 emails, which is why the rest still in limbo. It will
eventually time out and spam you for good! ;p

Thanks,

	M.

-- 
Without deviation from the norm, progress is not possible.
