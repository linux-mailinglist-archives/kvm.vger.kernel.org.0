Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 9BAA05EF7E9
	for <lists+kvm@lfdr.de>; Thu, 29 Sep 2022 16:44:12 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234912AbiI2OoL (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Thu, 29 Sep 2022 10:44:11 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:46620 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S234421AbiI2OoJ (ORCPT <rfc822;kvm@vger.kernel.org>);
        Thu, 29 Sep 2022 10:44:09 -0400
Received: from dfw.source.kernel.org (dfw.source.kernel.org [IPv6:2604:1380:4641:c500::1])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 0963013D63
        for <kvm@vger.kernel.org>; Thu, 29 Sep 2022 07:44:09 -0700 (PDT)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by dfw.source.kernel.org (Postfix) with ESMTPS id 2486C61812
        for <kvm@vger.kernel.org>; Thu, 29 Sep 2022 14:44:08 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 74D11C433C1;
        Thu, 29 Sep 2022 14:44:07 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1664462647;
        bh=Gs9H5OHTr0AT5Xc1QNtEofC7o127qef+wJzsINErOPk=;
        h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
        b=deOzK2FtILe0sBjK275mue9L4hd1iXPSKvcW+5SOFWCRBMIWflGcpjDdaOlCUVB35
         fHy59rA7tMmmc3xC4vF80htz1rXzypW2HqsT9nhliljKZCDmoAdrjkkzuiGLeXuS9n
         0jt/OYUoGpDVpbXXKOZscWJj3P1wEe+lwZDYzKBpTpr/TJi2W+rpnf46FJiRpBMxX2
         2EnLe9MCChq4vGQNfzJQSNYteEhqlT34jfUreO7a9kJUvzaT4bXG5HiONbyOlHk5Br
         jLVSfkI+qrZif6nVzwPVZCkxSIJKQ0SUak+Z3sUgJUuB9FOKmZJjgGrJbJ/sQcjbVc
         ZIatjAQGtQUZQ==
Received: from sofa.misterjones.org ([185.219.108.64] helo=goblin-girl.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.95)
        (envelope-from <maz@kernel.org>)
        id 1odulh-00DYpR-95;
        Thu, 29 Sep 2022 15:44:05 +0100
Date:   Thu, 29 Sep 2022 15:44:04 +0100
Message-ID: <86edvu6y17.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Gavin Shan <gshan@redhat.com>
Cc:     Peter Xu <peterx@redhat.com>, kvmarm@lists.cs.columbia.edu,
        kvm@vger.kernel.org, catalin.marinas@arm.com, bgardon@google.com,
        shuah@kernel.org, andrew.jones@linux.dev, will@kernel.org,
        dmatlack@google.com, pbonzini@redhat.com, zhenyzha@redhat.com,
        shan.gavin@gmail.com, james.morse@arm.com, suzuki.poulose@arm.com,
        alexandru.elisei@arm.com, oliver.upton@linux.dev
Subject: Re: [PATCH v4 3/6] KVM: arm64: Enable ring-based dirty memory tracking
In-Reply-To: <ddc4166c-81b6-2f7b-87a7-4af3d7db888a@redhat.com>
References: <20220927005439.21130-1-gshan@redhat.com>
        <20220927005439.21130-4-gshan@redhat.com>
        <YzMerD8ZvhvnprEN@x1n>
        <86sfkc7mg8.wl-maz@kernel.org>
        <YzM/DFV1TgtyRfCA@x1n>
        <320005d1-fe88-fd6a-be91-ddb56f1aa80f@redhat.com>
        <87y1u3hpmp.wl-maz@kernel.org>
        <YzRfkBWepX2CD88h@x1n>
        <d0beb9bd-5295-adb6-a473-c131d6102947@redhat.com>
        <ddc4166c-81b6-2f7b-87a7-4af3d7db888a@redhat.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/27.1
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: gshan@redhat.com, peterx@redhat.com, kvmarm@lists.cs.columbia.edu, kvm@vger.kernel.org, catalin.marinas@arm.com, bgardon@google.com, shuah@kernel.org, andrew.jones@linux.dev, will@kernel.org, dmatlack@google.com, pbonzini@redhat.com, zhenyzha@redhat.com, shan.gavin@gmail.com, james.morse@arm.com, suzuki.poulose@arm.com, alexandru.elisei@arm.com, oliver.upton@linux.dev
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
X-Spam-Status: No, score=-7.2 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_HI,
        SPF_HELO_NONE,SPF_PASS autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

On Thu, 29 Sep 2022 12:31:34 +0100,
Gavin Shan <gshan@redhat.com> wrote:
> 
> I've had the following PATCH[v5 3/7] to reuse bitmap for these particular
> cases. KVM_GET_DIRTY_LOG and KVM_CLEAR_DIRTY_LOG ioctls are used to visit
> the bitmap. The new capability is advertised by KVM_CAP_DIRTY_LOG_RING_BITMAP.
> Note those two ioctls are disabled when dirty-ring is enabled, we need to
> enable them accordingly.
> 
>    PATCH[v5 3/7] KVM: x86: Use bitmap in ring-based dirty page tracking
> 
> I would like to post v5 after someone reviews or acks kvm/selftests part
> of this series.

Feel free to post the series. This is too late for 6.1 anyway (I'll
probably send the PR to Paolo tomorrow), so this gives us plenty of
time to sort this out.

	M.

-- 
Without deviation from the norm, progress is not possible.
