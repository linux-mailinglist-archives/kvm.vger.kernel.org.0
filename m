Return-Path: <kvm-owner@vger.kernel.org>
X-Original-To: lists+kvm@lfdr.de
Delivered-To: lists+kvm@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 551757248DF
	for <lists+kvm@lfdr.de>; Tue,  6 Jun 2023 18:22:14 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S233443AbjFFQWM (ORCPT <rfc822;lists+kvm@lfdr.de>);
        Tue, 6 Jun 2023 12:22:12 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:55602 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S237697AbjFFQWK (ORCPT <rfc822;kvm@vger.kernel.org>);
        Tue, 6 Jun 2023 12:22:10 -0400
Received: from dfw.source.kernel.org (dfw.source.kernel.org [139.178.84.217])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id DE316FB
        for <kvm@vger.kernel.org>; Tue,  6 Jun 2023 09:22:06 -0700 (PDT)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by dfw.source.kernel.org (Postfix) with ESMTPS id 5EBDA6292C
        for <kvm@vger.kernel.org>; Tue,  6 Jun 2023 16:22:06 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id BC4AEC433EF;
        Tue,  6 Jun 2023 16:22:05 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1686068525;
        bh=fSQG8PElKqmUmE2jmLjjguImLMrx4MO3J5T6s68QSBQ=;
        h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
        b=axONMmfbs/GxPS4Vqsz3sLeZ0YFLag3LHhkB5vmznI12/0ueriMqW/fP3odPa1Uhr
         rr6G1MMRPNBiiKlZb6FKgNWks5+86gyfM3ZYVzG9u5l0/z4MvqEHqmzLjHSoEW4CjJ
         Oq3QNNTHl6SdJCBz66SCaWgh4i0zkWEEaFIYhEIvHW/zZEK1aZ92JfaLn/yQ9yealP
         +7p1J5+gLN/w0DvbbRDPhPBMyw7U+3iQ4z3cZ39URwDanCuT21PEkfDP503iPgbMa8
         1gIpnmMTkkcS49+CU06jIDn9KigOMl/F7S/wTJBxjd9cBySPPS611fyGP6G974dHvu
         rb5DcWyCOg93w==
Received: from 152.5.30.93.rev.sfr.net ([93.30.5.152] helo=wait-a-minute.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.95)
        (envelope-from <maz@kernel.org>)
        id 1q6ZRb-003G6y-CJ;
        Tue, 06 Jun 2023 17:22:03 +0100
Date:   Tue, 06 Jun 2023 17:22:01 +0100
Message-ID: <87o7lso91y.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Eric Auger <eauger@redhat.com>
Cc:     kvmarm@lists.linux.dev, kvm@vger.kernel.org,
        linux-arm-kernel@lists.infradead.org,
        Alexandru Elisei <alexandru.elisei@arm.com>,
        Andre Przywara <andre.przywara@arm.com>,
        Chase Conklin <chase.conklin@arm.com>,
        Christoffer Dall <christoffer.dall@arm.com>,
        Ganapatrao Kulkarni <gankulkarni@os.amperecomputing.com>,
        Darren Hart <darren@os.amperecomputing.com>,
        Jintack Lim <jintack@cs.columbia.edu>,
        Russell King <rmk+kernel@armlinux.org.uk>,
        Miguel Luis <miguel.luis@oracle.com>,
        James Morse <james.morse@arm.com>,
        Suzuki K Poulose <suzuki.poulose@arm.com>,
        Oliver Upton <oliver.upton@linux.dev>,
        Zenghui Yu <yuzenghui@huawei.com>
Subject: Re: [PATCH v10 00/59] KVM: arm64: ARMv8.3/8.4 Nested Virtualization support
In-Reply-To: <c46da9eb-a02d-1b1d-9c1b-9f900a5e9e6d@redhat.com>
References: <20230515173103.1017669-1-maz@kernel.org>
        <9cf2356b-f990-1cd2-c7e6-a984e9f604c6@redhat.com>
        <87r0qpnj2t.wl-maz@kernel.org>
        <c46da9eb-a02d-1b1d-9c1b-9f900a5e9e6d@redhat.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/28.2
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 93.30.5.152
X-SA-Exim-Rcpt-To: eauger@redhat.com, kvmarm@lists.linux.dev, kvm@vger.kernel.org, linux-arm-kernel@lists.infradead.org, alexandru.elisei@arm.com, andre.przywara@arm.com, chase.conklin@arm.com, christoffer.dall@arm.com, gankulkarni@os.amperecomputing.com, darren@os.amperecomputing.com, jintack@cs.columbia.edu, rmk+kernel@armlinux.org.uk, miguel.luis@oracle.com, james.morse@arm.com, suzuki.poulose@arm.com, oliver.upton@linux.dev, yuzenghui@huawei.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
X-Spam-Status: No, score=-7.1 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_HI,
        SPF_HELO_NONE,SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham
        autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <kvm.vger.kernel.org>
X-Mailing-List: kvm@vger.kernel.org

On Tue, 06 Jun 2023 10:29:36 +0100,
Eric Auger <eauger@redhat.com> wrote:
> 
> Hi Marc,
> On 6/6/23 09:30, Marc Zyngier wrote:
> > Hey Eric,
> > 
> > On Mon, 05 Jun 2023 12:28:12 +0100,
> > Eric Auger <eauger@redhat.com> wrote:
> >>
> >> Hi Marc,
> >>
> >> On 5/15/23 19:30, Marc Zyngier wrote:
> >>> This is the 4th drop of NV support on arm64 for this year.
> >>>
> >>> For the previous episodes, see [1].
> >>>
> >>> What's changed:
> >>>
> >>> - New framework to track system register traps that are reinjected in
> >>>   guest EL2. It is expected to replace the discrete handling we have
> >>>   enjoyed so far, which didn't scale at all. This has already fixed a
> >>>   number of bugs that were hidden (a bunch of traps were never
> >>>   forwarded...). Still a work in progress, but this is going in the
> >>>   right direction.
> >>>
> >>> - Allow the L1 hypervisor to have a S2 that has an input larger than
> >>>   the L0 IPA space. This fixes a number of subtle issues, depending on
> >>>   how the initial guest was created.
> >>>
> >>> - Consequently, the patch series has gone longer again. Boo. But
> >>>   hopefully some of it is easier to review...
> >>>
> >>> [1] https://lore.kernel.org/r/20230405154008.3552854-1-maz@kernel.org
> >>>
> >>> Andre Przywara (1):
> >>>   KVM: arm64: nv: vgic: Allow userland to set VGIC maintenance IRQ
> >>
> >> I guess you have executed kselftests on L1 guests. Have all the tests
> >> passed there? On my end it stalls in the KVM_RUN.
> > 
> > No, I hardly run any kselftest, because they are just not designed to
> > run at EL2 at all. There's some work to be done there, but I just
> > don't have the bandwidth for that (hint, wink...)
> 
> oh OK, I missed that point. If nobody is working on this I can start
> looking at it. Would be interesting to run them on nested guest too.

If you want to pick this up, it would be extremely helpful. And no,
nobody is really looking into it at the moment, so it's all yours!

Thanks,

	M.

-- 
Without deviation from the norm, progress is not possible.
